!function(n,t){var e;try{n=window,e=document}catch(n){}"function"==typeof define&&define.amd?define("conbo",function(){return t(n,e)}):"undefined"!=typeof module&&module.exports?(module.exports=t(n,e),exports.default=module.exports,exports.__esModule=!0):n.conbo=t(n,e)}(this,function(window,document,undefined){"use strict";var __namespaces={},conbo=function(n){n&&conbo.isString(n)||(n="default"),__namespaces[n]||(__namespaces[n]=new conbo.Namespace);var t=__namespaces[n],e=conbo.rest(arguments),o=e.pop();if(1==arguments.length&&conbo.isFunction(arguments[0])&&(o=arguments[0]),conbo.isFunction(o)){var i=o.apply(t,e);conbo.isObject(i)&&!conbo.isArray(i)&&t.import(i)}return t};function k(n){if(!(this instanceof k))throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("Parameter must be a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],q(n,this)}function l(o,i){for(;3===o._state;)o=o._value;0!==o._state?(o._handled=!0,setTimeout(function(){var t=1===o._state?i.onFulfilled:i.onRejected;if(null!==t){var e;try{e=t(o._value)}catch(t){return void n(i.promise,t)}m(i.promise,e)}else(1===o._state?m:n)(i.promise,o._value)},0)):o._deferreds.push(i)}function m(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof k)return e._state=3,e._value=t,void o(e);if("function"==typeof i)return void q(conbo.bind(i,t),e)}e._state=1,e._value=t,o(e)}catch(t){n(e,t)}}function n(n,t){n._state=2,n._value=t,o(n)}function o(n){2===n._state&&n._deferreds.length;for(var t=0,e=n._deferreds.length;t<e;t++)l(n,n._deferreds[t]);n._deferreds=null}function p(n,t,e){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.promise=e}function q(t,e){var o=!1;try{t(function(n){o||(o=!0,m(e,n))},function(t){o||(o=!0,n(e,t))})}catch(t){if(o)return;o=!0,n(e,t)}}conbo.conbo=conbo,conbo.VERSION="4.3.26",conbo.toString=function(){return"ConboJS "+this.VERSION},"Promise"in window||(k.prototype.catch=function(n){return this.then(null,n)},k.prototype.then=function(n,t){var e=new this.constructor(conbo.noop);return l(this,new p(n,t,e)),e},k.all=function(t){return new k(function(o,i){if(!conbo.isArray(t))return i(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return o([]);var c=r.length;function s(t,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if("function"==typeof e)return void e.call(n,function(n){s(t,n)},i)}r[t]=n,0==--c&&o(r)}catch(n){i(n)}}for(var n=0;n<r.length;n++)s(n,r[n])})},k.resolve=function(t){return t&&"object"==typeof t&&t.constructor===k?t:new k(function(n){n(t)})},k.reject=function(e){return new k(function(n,t){t(e)})},k.race=function(i){return new k(function(n,t){if(!conbo.isArray(i))return t(new TypeError("Promise.race accepts an array"));for(var e=0,o=i.length;e<o;e++)k.resolve(i[e]).then(n,t)})},window.Promise=k),"finally"in window.Promise.prototype||(window.Promise.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}),conbo.Promise=window.Promise,conbo.CONTENT_TYPE_JSON="application/json",conbo.CONTENT_TYPE_FORM="application/x-www-form-urlencoded",conbo.DATA_TYPE_JSON="json",conbo.DATA_TYPE_SCRIPT="script",conbo.DATA_TYPE_TEXT="text",conbo.NAMESPACE_DEFAULT="default";var __dispatchChange=function(n,t){if(n instanceof conbo.EventDispatcher){var e={property:t,value:n[t]};n.dispatchEvent(new conbo.ConboEvent("change:"+t,e)),n.dispatchEvent(new conbo.ConboEvent("change",e))}},__defineBindableProperty=function(n,t,e){if(!conbo.isAccessor(n,t)){arguments.length<3&&(e=n[t]);var o=0!=t.indexOf("_"),i="__"+t;__definePrivateProperty(n,i,e);Object.defineProperty(n,t,{enumerable:o,configurable:!0,get:function(){return this[i]},set:function(n){conbo.isEqual(n,this[i])||(this[i]=n,__dispatchChange(this,t))}})}},__definePrivateProperty=function(n,t,e){2==arguments.length&&(e=n[t]),Object.defineProperty(n,t,{enumerable:!1,configurable:!0,writable:!0,value:e})},__definePrivateProperties=function(n,t){for(var e in t)__definePrivateProperty(n,e,t[e])},__denumerate=function(e){var t=arguments[1];(t instanceof RegExp?conbo.filter(conbo.keys(e),function(n){return t.test(n)}):1<arguments.length?conbo.rest(arguments):conbo.keys(e)).forEach(function(n){var t=Object.getOwnPropertyDescriptor(e,n)||{value:e[n],configurable:!0,writable:!0};t.enumerable=!1,Object.defineProperty(e,n,t)})},__deprecated=function(n,t){conbo.warn("Deprecation warning: "+n+" is deprecated, please use "+t)},__ep=function(n){return new conbo.ElementProxy(n)};function $i(n,e,o){if("*"==n&&(n="all"),this.__queue){var i,r=this,t=function(n,t){for(i=0;i<n.length;i++)e&&e!=n[i].handler||o&&o!=n[i].scope||n.splice(i--,1);n.length||delete r.__queue[t]};n in r.__queue?t(r.__queue[n],n):n||conbo.forEach(r.__queue,t,r)}}!function(){var i=Array.prototype,n=Object.prototype,o=i.push,c=i.slice,r=i.concat,l=n.toString,e=n.hasOwnProperty,s=i.indexOf,a=i.lastIndexOf,u=i.map,b=(i.reduce,i.reduceRight,i.filter),h=i.every,d=i.some,t=Array.isArray,f=Object.keys;conbo.forEach=function(n,t,e){if(n!=undefined){var o,i;if(conbo.isIterable(n)){for(o=0,i=n.length;o<i;++o)if(!1===t.call(e,n[o],o,n))return}else{var r=conbo.keys(n);for(o=0,i=r.length;o<i;o++)if(!1===t.call(e,n[r[o]],r[o],n))return}return n}};var p=conbo.forEach;conbo.map=function(n,t,e){return u.call(n||[],t,e)},conbo.indexOf=function(n,t){return s.call(n||[],t)},conbo.lastIndexOf=function(n,t){return a.call(n||[],t)},conbo.find=function(n,o,i){var r;return conbo.some(n,function(n,t,e){if(o.call(i,n,t,e))return r=n,!0}),r},conbo.findIndex=function(n,t,e){var o=conbo.find(n,t,e);return s.call(n,o)},conbo.filter=function(n,t,e){return b.call(n||[],t,e)},conbo.reject=function(n,o,i){return conbo.filter(n,function(n,t,e){return!o.call(i,n,t,e)},i)},conbo.every=function(n,t,e){return h.call(n||[],t||conbo.identity,e)},conbo.some=function(n,t,e){return d.call(n||[],t||conbo.identity,e)};conbo.some;conbo.contains=function(n,t){return n&&"indexOf"in n?-1!=n.indexOf(t):-1!=s.call(n||[],t)},conbo.invoke=function(n,t){var e=c.call(arguments,2),o=conbo.isFunction(t);return conbo.map(n,function(n){return(o?t:n[t]).apply(n,e)})},conbo.pluck=function(n,t){return conbo.map(n,conbo.property(t))},conbo.max=function(n,i,r){if(!i&&conbo.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var c=-1/0,s=-1/0;return p(n,function(n,t,e){var o=i?i.call(r,n,t,e):n;s<o&&(c=n,s=o)}),c},conbo.min=function(n,i,r){if(!i&&conbo.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var c=1/0,s=1/0;return p(n,function(n,t,e){var o=i?i.call(r,n,t,e):n;o<s&&(c=n,s=o)}),c},conbo.shuffle=function(n){var t,e=0,o=[];return p(n,function(n){t=conbo.random(e++),o[e-1]=o[t],o[t]=n}),o},conbo.sum=function(n){return i.reduce.call(n||[],function(n,t){return n+t},0)};conbo.toArray=function(n){return n?conbo.isArray(n)?c.call(n):conbo.isIterable(n)?conbo.map(n,conbo.identity):conbo.values(n):[]},conbo.size=function(n){return n?conbo.isIterable(n)?n.length:conbo.keys(n).length:0},conbo.last=function(n,t,e){return n==undefined?undefined:t==undefined||e?n[n.length-1]:c.call(n,Math.max(n.length-t,0))},conbo.rest=function(n,t,e){return c.call(n,t==undefined||e?1:t)},conbo.compact=function(n){return conbo.filter(n,conbo.identity)};var v=function(n,t,e){return t&&conbo.every(n,conbo.isArray)?r.apply(e,n):(p(n,function(n){conbo.isArray(n)||conbo.isArguments(n)?t?o.apply(e,n):v(n,t,e):e.push(n)}),e)};conbo.flatten=function(n,t){return v(n,t,[])},conbo.without=function(n){return conbo.difference(n,c.call(arguments,1))},conbo.partition=function(n,t){var e=[],o=[];return p(n,function(n){(t(n)?e:o).push(n)}),[e,o]},conbo.uniq=function(e,o,n,t){conbo.isFunction(o)&&(t=n,n=o,o=!1);var i=n?conbo.map(e,n,t):e,r=[],c=[];return p(i,function(n,t){(o?t&&c[c.length-1]===n:conbo.contains(c,n))||(c.push(n),r.push(e[t]))}),r},conbo.union=function(){return conbo.uniq(conbo.flatten(arguments,!0))},conbo.intersection=function(n){var e=c.call(arguments,1);return conbo.filter(conbo.uniq(n),function(t){return conbo.every(e,function(n){return conbo.contains(n,t)})})},conbo.difference=function(n){var t=r.apply(i,c.call(arguments,1));return conbo.filter(n,function(n){return!conbo.contains(t,n)})},conbo.object=function(n,t){if(n==undefined)return{};for(var e={},o=0,i=n.length;o<i;o++)t?e[n[o]]=t[o]:e[n[o][0]]=n[o][1];return e},conbo.range=function(n,t,e){arguments.length<=1&&(t=n||0,n=0),e=arguments[2]||1;for(var o=Math.max(Math.ceil((t-n)/e),0),i=0,r=new Array(o);i<o;)r[i++]=n,n+=e;return r};conbo.bindAll=function(t){return(1<arguments.length?conbo.rest(arguments):conbo.filter(conbo.getFunctionNames(t,!0),function(n){return!conbo.isNative(t[n])})).forEach(function(n){t[n]=t[n].bind(t)}),t},conbo.partial=function(i){var r=c.call(arguments,1);return function(){for(var n=0,t=r.slice(),e=0,o=t.length;e<o;e++)t[e]===conbo&&(t[e]=arguments[n++]);for(;n<arguments.length;)t.push(arguments[n++]);return i.apply(this,t)}};var m=!document||-1!=["complete","loaded"].indexOf(document.readyState);conbo.ready=function(n,t){var e=conbo.toArray(arguments),o=function(){document&&document.removeEventListener("DOMContentLoaded",o),m=!0,conbo.defer.apply(conbo,e)};return m?o():document.addEventListener("DOMContentLoaded",o),conbo},conbo.defer=function(n,t){return t&&(n=n.bind(t)),setTimeout.apply(undefined,[n,0].concat(conbo.rest(arguments,2)))};function _(){for(var n;n=g.shift();)n()}var g=[];conbo.callLater=function(n,t){0===_.length&&window.requestAnimationFrame(_);return g.push(function(){n.apply(t,conbo.rest(arguments,2))}),conbo},conbo.once=function(n){var t,e=!1;return function(){return e||(e=!0,t=n.apply(this,arguments),n=undefined),t}},conbo.wrap=function(n,t){return conbo.partial(t,n)},conbo.keys=function(n,t){if(!n)return[];if(t){var e=[];for(var o in n)e.push(o);return e}return f(n)},conbo.functions=function(t,n,e){return conbo.filter(conbo.keys(t,n),function(n){return e?conbo.isFunction(t[n]):conbo.isFunc(t,n)})},conbo.variables=function(n,t){return conbo.difference(conbo.keys(n,t),conbo.functions(n,t))},conbo.getPropertyNames=function(n,t){if(!n)return[];if(t){for(var e=[];e=e.concat(Object.getOwnPropertyNames(n)),n=Object.getPrototypeOf(n););return conbo.uniq(e)}return Object.getOwnPropertyNames(n)},conbo.getFunctionNames=function(t,n,e){return conbo.filter(conbo.getPropertyNames(t,n),function(n){return e?conbo.isFunction(t[n]):conbo.isFunc(t,n)})},conbo.getVariableNames=function(n,t){return conbo.difference(conbo.getPropertyNames(n,t),conbo.getFunctionNames(n,t))},conbo.getPublicVariableNames=function(n,t){return conbo.getVariableNames(n,t).filter(function(n){return 0!=n.indexOf("_")})},conbo.getPropertyDescriptor=function(n,t){if(n)do{var e=Object.getOwnPropertyDescriptor(n,t);if(e)return e}while(n=Object.getPrototypeOf(n))},conbo.values=function(n,t){for(var e=conbo.keys(n,t),o=e.length,i=new Array(o),r=0;r<o;r++)i[r]=n[e[r]];return i},conbo.defineValues=function(e,n){return p(c.call(arguments,1),function(n){if(n)for(var t in n)conbo.cloneProperty(n,t,e)}),e},conbo.defineBindableValues=function(e,n){return p(c.call(arguments,1),function(n){if(n)for(var t in n)delete e[t],__defineBindableProperty(e,t,n[t])}),e},conbo.pick=function(t){var e={},n=r.apply(i,c.call(arguments,1));return p(n,function(n){n in t&&(e[n]=t[n])}),e},conbo.omit=function(n){var t={},e=r.apply(i,c.call(arguments,1));for(var o in n)conbo.contains(e,o)||(t[o]=n[o]);return t},conbo.defineDefaults=function(e){return p(c.call(arguments,1),function(n){if(n)for(var t in n)e[t]===undefined&&conbo.cloneProperty(n,t,e)}),e},conbo.setDefaults=function(e){return p(c.call(arguments,1),function(n){if(n)for(var t in n)e[t]===undefined&&(e[t]=n[t])}),e},conbo.implement=function(n){return conbo.setDefaults.apply(conbo,arguments)},conbo.clone=function(n){return conbo.isObject(n)?conbo.isArray(n)?n.slice():conbo.defineValues({},n):n};var y=function(n,t,e,o){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;var i=l.call(n);if(i!=l.call(t))return!1;switch(i){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0===n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var r=e.length;r--;)if(e[r]==n)return o[r]==t;var c=n.constructor,s=t.constructor;if(c!==s&&!(conbo.isFunction(c)&&c instanceof c&&conbo.isFunction(s)&&s instanceof s)&&"constructor"in n&&"constructor"in t)return!1;e.push(n),o.push(t);var a=0,u=!0;if("[object Array]"==i){if(u=(a=n.length)==t.length)for(;a--&&(u=y(n[a],t[a],e,o)););}else{for(var b in n)if(conbo.has(n,b)&&(a++,!(u=conbo.has(t,b)&&y(n[b],t[b],e,o))))break;if(u){for(b in t)if(conbo.has(t,b)&&!a--)break;u=!a}}return e.pop(),o.pop(),u};conbo.isEqual=function(n,t){return y(n,t,[],[])},conbo.isEmpty=function(n){return!n||conbo.isIterable(n)&&0===n.length||/^0\.?0+?$/.test(n)&&!parseFloat(n)||conbo.isObject(n)&&!conbo.keys(n).length},conbo.isIterable=function(n){return n&&n.length===+n.length},conbo.isElement=function(n){return!(!n||1!==n.nodeType)},conbo.isArray=t||function(n){return"[object Array]"==l.call(n)},conbo.isObject=function(n){return n===Object(n)},conbo.isPlainObject=function(n){if(n&&n!==Math){var t=Object.getPrototypeOf(n);return!t||t===Object.prototype}return!1},p(["Arguments","Function","String","Number","Date","RegExp"],function(t){conbo["is"+t]=function(n){return l.call(n)=="[object "+t+"]"}}),conbo.isArguments(arguments)||(conbo.isArguments=function(n){return!(!n||!conbo.has(n,"callee"))}),"function"!=typeof/./&&(conbo.isFunction=function(n){return"function"==typeof n}),conbo.isFunc=function(n,t){var e=conbo.getPropertyDescriptor(n,t);return e&&"function"==typeof e.value},conbo.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},conbo.isNaN=function(n){return conbo.isNumber(n)&&n!=+n},conbo.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"==l.call(n)},conbo.isNull=function(n){return null===n},conbo.isUndefined=function(n){return n===undefined},conbo.isNumeric=function(n){return!isNaN(parseFloat(n))},conbo.has=function(n,t){return e.call(n,t)},conbo.identity=function(n){return n},conbo.property=function(t){return function(n){return n[t]}},conbo.matches=function(e){return function(n){if(n===e)return!0;for(var t in e)if(e[t]!==n[t])return!1;return!0}},conbo.random=function(n,t){return t==undefined&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var E=0;conbo.uniqueId=function(n){var t=++E+"";return n?n+t:t},conbo.guid=function(){return window.crypto?([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(n){return(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)}):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)})},conbo.isSupported=window.addEventListener&&!!Object.defineProperty&&!!Object.getOwnPropertyDescriptor,conbo.isNode="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0),conbo.noop=function(){},conbo.notImplemented=function(){conbo.warn("Method not implemented")},conbo.toCamelCase=function(n,t){var e=(n||"").toLowerCase().replace(/([\W_])([a-z])/g,function(n){return n[1].toUpperCase()}).replace(/(\W+)/,"");return t?e.charAt(0).toUpperCase()+e.slice(1):e},conbo.toUnderscoreCase=function(n,t){return t=t||"_",(n||"").replace(/\W+/g,t).replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").toLowerCase()},conbo.toKebabCase=function(n){return conbo.toUnderscoreCase(n,"-")},conbo.toValueString=function(n){return null==n?"":String(n)},conbo.padLeft=function(n,t,e){for(e||0===e||(e=" "),n||0===n||(n=""),t=t||2,e=e.toString().charAt(0),n=n.toString();n.length<t;)n=e+n;return n},conbo.addLeadingZero=function(n,t){return conbo.padLeft(n,t,0)},conbo.formatNumber=function(n,t,e,o){n=(n+"").replace(/[^0-9+\-Ee.]/g,"");var i=isFinite(+n)?+n:0,r=isFinite(+t)?Math.abs(t):0,c=conbo.isUndefined(o)?",":o,s=conbo.isUndefined(e)?".":e,a=i.toFixed(r).split(".");return 3<a[0].length&&(a[0]=a[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,c)),(a[1]||"").length<r&&(a[1]=a[1]||"",a[1]+=new Array(r-a[1].length+1).join("0")),a.join(s)},conbo.formatCurrency=function(n,t,e,o,i,r){conbo.isUndefined(o)&&(o=2),t=t||"";var c=conbo.formatNumber(n,o,i,r);return e?c+t:t+c},conbo.encodeEntities=function(n){return conbo.isString(n)||(n=conbo.isNumber(n)?n.toString():""),n.replace(/[\u00A0-\u9999<>\&]/gim,function(n){return"&#"+n.charCodeAt(0)+";"})},conbo.decodeEntities=function(n){return conbo.isString(n)||(n=""),n.replace(/&#(\d+);/g,function(n,t){return String.fromCharCode(t)})},conbo.assign=function(e){return conbo.rest(arguments).forEach(function(n){if(n)for(var t in n)e[t]=n[t]}),e},conbo.setValues=function(n){return __deprecated("conbo.setValues","conbo.assign"),conbo.assign.apply(conbo,arguments)},conbo.isClass=function(n,t){return!!n&&"function"==typeof n&&n.prototype instanceof(t||conbo.Class)},conbo.cloneProperty=function(n,t,e,o){o=o||t;var i=Object.getOwnPropertyDescriptor(n,t);return i?Object.defineProperty(e,o,i):e[o]=n[t],this},conbo.sortOn=function(n,o,i){return i=i||{},conbo.isArray(n)&&o&&n.sort(function(n,t){var e=[n[o],t[o]];return i.descending&&e.reverse(),i.caseInsensitive&&conbo.forEach(e,function(n,t){conbo.isString(n)&&(e[t]=n.toLowerCase())}),e[0]<e[1]?-1:e[0]>e[1]?1:0}),n},conbo.instanceOf=function(n,t){if(!n||conbo.isClass(n)||!t)return!1;try{if(n instanceof t||n.constructor===t)return!0}catch(n){}return!1},conbo.is=function(n,t,e){if(!n||conbo.isClass(n)||!t)return!1;if(conbo.instanceOf(n,t))return!0;if(e=!1!==e,!conbo.isObject(t)||!conbo.keys(t).length)return!1;for(var o in t)if(!(o in n)||e&&!conbo.isUndefined(t[o])&&!conbo.is(n[o],t[o],e))return!1;return!0},conbo.loadCss=function(o,i){return new Promise(function(n,t){var e;"document"in window&&!document.querySelector('[href="'+o+'"]')||t(),(e=document.createElement("link")).rel="stylesheet",e.type="text/css",e.media=i||"all",e.addEventListener("load",n),e.addEventListener("error",t),e.href=o,document.querySelector("head").appendChild(e)})},conbo.loadScript=function(n,t){return conbo.httpRequest({url:n,dataType:"script",scope:t})},conbo.makeBindable=function(t,n){return(n=conbo.uniq(n||conbo.getPublicVariableNames(t,!0))).forEach(function(n){__defineBindableProperty(t,n)}),this},conbo.makeAllBindable=function(n,t){return t=(t||[]).concat(conbo.getPublicVariableNames(n,!0)),conbo.makeBindable(n,t),this},conbo.isAccessor=function(n,t){return!!n&&(!!n.__lookupGetter__(t)||!!n.__lookupSetter__(t))},conbo.isNative=function(n){var t=Object.prototype.toString,e=Function.prototype.toString,o=RegExp("^"+String(t).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),i=typeof n;return"function"==i?o.test(e.call(n)):n&&"object"==i&&/^\[object .+?Constructor\]$/.test(t.call(n))||!1},conbo.parseTemplate=function(n,o){return n?(o=o||{},n.replace(/{{(.+?)}}|\${(.+?)}/g,function(){try{var n,t,e=(arguments[1]||arguments[2]).trim().split("|");return n=o[(e[0]||"").trim()],t=o[(e[1]||"").trim()],conbo.isFunction(t)||(t=conbo.value),t(n)}catch(n){}})):""},conbo.compileTemplate=function(t,e){return function(n){return conbo.parseTemplate(t,conbo.setDefaults(n||{},e))}},conbo.toQueryString=function(e){return conbo.keys(e).map(function(n){var t=e[n];return t==undefined&&(t=""),n+"="+encodeURIComponent(t)}).join("&")},conbo.getValue=function(n,t,e){if(!1!==e)return n[t];for(var o in n)if(o.toLowerCase()==t.toLowerCase())return n[o]},conbo.jsonify=function(n){if(this!=conbo&&(n=this),conbo.isObject(n)){if(this!=n&&"toJSON"in n)return n.toJSON();if(conbo.isIterable(n))return conbo.map(n,function(n){return conbo.jsonify(n)});var t=conbo.filter(conbo.variables(n,!0),function(n){return/^[a-z]*$/i.test(n)});return conbo.pick.apply(conbo,[n].concat(t))}return n},conbo.logEnabled=!0;["log","warn","info","error"].forEach(function(n){conbo[n]=function(){console&&conbo.logEnabled&&console[n].apply(console,arguments)}})}(),function(){conbo.initDom=function(o,n){if(!o)throw new Error("initDom: namespace is undefined");conbo.isString(o)&&(o=conbo(o)),n=n||document.querySelector("html");return conbo.ready(function(){conbo.toArray(n.querySelectorAll(":not(.cb-app)")).forEach(function(n){var t=__ep(n).attributes.cbApp||conbo.toCamelCase(n.tagName,!0),e=o[t];e&&conbo.isClass(e,conbo.Application)&&new e({el:n})})}),this};function i(n,t){for(var e=r.length,o=0;o<e;o++){var i=r[o];if(i[0]==n&&i[1]==t)return o}return-1}var r=[];conbo.observeDom=function(o,n){if(conbo.isString(o)&&(o=conbo(o)),-1==i(o,n)){n=n||document.querySelector("html");var t=new conbo.MutationObserver;return t.observe(n),t.addEventListener(conbo.ConboEvent.ADD,function(n){n.nodes.forEach(function(n){var t=__ep(n);if(!t.hasClass("cb-app")){var e=t.cbAttributes.app||conbo.toCamelCase(n.tagName,!0);e&&o[e]&&new o[e]({el:n})}})}),r.push([o,n,t]),this}},conbo.unobserveDom=function(n,t){conbo.isString(n)&&(n=conbo(n));var e=i(n,t);-1!=e&&(r[e][2].removeEventListener(),r.slice(e,1));return this}}(),document&&!document.querySelector("#cb-style")&&(document.querySelector("head").innerHTML+='<style id="cb-style" type="text/css">\n.cb-hide { visibility:hidden !important; }\n.cb-exclude { display:none !important; }\n.cb-disable { pointer-events:none !important; cursor:default !important; }\nspan { font:inherit; color:inherit; }\n</style>'),conbo.Bindable=function(n,t){conbo.makeBindable(n,[t])},conbo.Inject=function(n,t){delete n[t]&&Object.defineProperty(n,t,{configurable:!0,enumerable:!0,writable:!0})},conbo.Viewable=function(e,o){switch(arguments.length){case 1:-1!==(o=e).indexOf(".")&&conbo.warn('@Viewable("my.custom.namespace") syntax is no longer valid, please use @Viewable("my.custom.namespace", "MyClassName")');case 0:e="default"}return function(n){var t={};return o=o||n.name,Object.defineProperty(n.prototype,"__className",{configurable:!0,enumerable:!1,writable:!0,value:conbo.toKebabCase(o)}),t[o]=n,conbo(e).import(t),n}},conbo.Class=function(){this.declarations.apply(this,arguments),this.preinitialize.apply(this,arguments),this.initialize.apply(this,arguments)},conbo.Class.prototype={declarations:function(){},preinitialize:function(){},initialize:function(){},destroy:function(){},get supro(){return Object.getPrototypeOf(Object.getPrototypeOf(this))},bindAll:function(){return conbo.bindAll.apply(conbo,[this].concat(conbo.toArray(arguments))),this},toString:function(){return"conbo.Class"}},__denumerate(conbo.Class.prototype),conbo.Class.extend=function(n,t){var e=this,o=n&&conbo.has(n,"constructor")?n.constructor:function(){return e.apply(this,arguments)};conbo.defineValues(o,e,t);function i(){this.constructor=o}return i.prototype=e.prototype,o.prototype=new i,n&&conbo.defineValues(o.prototype,n),o},conbo.Class.implement=function(){var n=conbo.defineDefaults.apply(conbo,conbo.union([{}],arguments)),t=conbo.keys(n),e=this.prototype;conbo.defineDefaults(this.prototype,n);var o=conbo.reject(t,function(n){return e[n]!==conbo.notImplemented});if(o.length)throw new Error(e.toString()+" does not implement the following method(s): "+o.join(", "));return this},conbo.ConboClass=conbo.Class.extend({constructor:function(n){var t=conbo.toArray(arguments);t[0]===undefined?t[0]={}:t[0]instanceof conbo.Context&&conbo.is(this,conbo.IInjectable,!1)&&(t[0]=t[0].addTo()),this.declarations.apply(this,t),t[0].context&&(this.context=t[0].context),this instanceof conbo.EventDispatcher&&this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.PREINITIALIZE)),this.preinitialize.apply(this,t),this.__construct.apply(this,t),this instanceof conbo.EventDispatcher&&this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.INITIALIZE)),this.initialize.apply(this,t),conbo.makeAllBindable(this,this.bindable),this.__postInitialize.apply(this,t),this instanceof conbo.EventDispatcher&&this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.INIT_COMPLETE))},toString:function(){return"conbo.ConboClass"},__construct:function(){},__postInitialize:function(){}}),__denumerate(conbo.ConboClass.prototype),conbo.Namespace=conbo.ConboClass.extend({__construct:function(){conbo.ready(function(){document&&!1!==this.autoInit&&this.initDom()},this)},initDom:function(n){return conbo.initDom(this,n),this},observeDom:function(n){return conbo.observeDom(this,n),this},unobserveDom:function(n){return conbo.unobserveDom(this,n),this},import:function(n){return conbo.setDefaults.apply(conbo,[this].concat(conbo.toArray(arguments))),this}}),conbo.IInjectable={get context(){return this.__context},set context(n){n!=this.__context&&(n instanceof conbo.Context&&n.inject(this),this.__context=n,__denumerate(this,"__context"))}},conbo.Event=conbo.Class.extend({constructor:function(n){if(this.preinitialize.apply(this,arguments),conbo.isString(n)?this.type=n:conbo.defineDefaults(this,n),!this.type)throw new Error("Invalid or undefined event type");this.initialize.apply(this,arguments)},initialize:function(n,t){this.data=t},clone:function(){return conbo.clone(this)},preventDefault:function(){return this.defaultPrevented=!0,this},stopPropagation:function(){return this.cancelBubble=!0,this},stopImmediatePropagation:function(){return this.immediatePropagationStopped=!0,this.stopPropagation(),this},toString:function(){return"conbo.Event"}},{ALL:"*"}),__denumerate(conbo.Event.prototype),conbo.DataEvent=conbo.Event.extend(),conbo.ConboEvent=conbo.Event.extend({initialize:function(n,t){conbo.defineDefaults(this,t)},toString:function(){return"conbo.ConboEvent"}},{ALL:"*",CHANGE:"change",ADD:"add",REMOVE:"remove",ROUTE:"route",START:"start",STOP:"stop",TEMPLATE_COMPLETE:"templateComplete",TEMPLATE_ERROR:"templateError",BIND:"bind",UNBIND:"unbind",PREINITIALIZE:"preinitialize",INITIALIZE:"initialize",INIT_COMPLETE:"initComplete",CREATION_COMPLETE:"creationComplete",DETACH:"detach",RESULT:"result",FAULT:"fault"}),conbo.EventDispatcher=conbo.ConboClass.extend({addEventListener:function(n,o,i,r,c){if(!n)throw new Error("Event type undefined");if(!o||!conbo.isFunction(o))throw new Error("Event handler is undefined or not a function");if(i)if(conbo.isPlainObject(i)){var t=i;i=t.scope,r=t.priority||0,c=t.once||!1}else __deprecated("addEventListener(type, handler, scope, priority, once)","addEventListener(type, handler, options)");return conbo.isString(n)&&(n=n.split(" ")),conbo.isArray(n)&&conbo.forEach(n,function(n,t,e){(function(n,t,e,o,i){"*"==n&&(n="all"),this.__queue||__definePrivateProperty(this,"__queue",{}),this.hasEventListener(n,t,e)||(n in this.__queue||(this.__queue[n]=[]),this.__queue[n].push({handler:t,scope:e,once:!!i,priority:~~o}),this.__queue[n].sort(function(n,t){return t.priority-n.priority}))}).call(this,n,o,i,r,c)},this),this},removeEventListener:function(n,o,i){return arguments.length?(conbo.isPlainObject(i)&&(i=i.scope),conbo.isString(n)&&(n=n.split(" ")),conbo.isArray(n)||(n=[undefined]),conbo.forEach(n,function(n,t,e){$i.call(this,n,o,i)},this)):__definePrivateProperty(this,"__queue",{}),this},hasEventListener:function(n,t,e){return!!(this.__queue&&n in this.__queue&&this.__queue[n].length)&&(conbo.isPlainObject(e)&&(e=e.scope),!!this.__queue[n].filter(function(n){return!(t&&n.handler!=t||e&&n.scope!=e)}).length)},dispatchEvent:function(n){if(!(n instanceof conbo.Event))throw new Error("event parameter is not an instance of conbo.Event");if(!this.__queue||!(n.type in this.__queue)&&!this.__queue.all)return this;n.target||(n.target=this),n.currentTarget=this;var t=conbo.union(this.__queue[n.type]||[],this.__queue.all||[]);if(!t||!t.length)return this;for(var e=0,o=t.length;e<o;++e){var i=t[e];if(i.handler.call(i.scope||this,n),i.once&&$i.call(this,n.type,i.handler,i.scope),n.immediatePropagationStopped)break}return this},dispatchChange:function(n){return conbo.forEach(arguments,function(n){__dispatchChange(this,n)},this),this},toString:function(){return"conbo.EventDispatcher"}}).implement(conbo.IInjectable),__denumerate(conbo.EventDispatcher.prototype),conbo.EventProxy=conbo.Class.extend({constructor:function(n){this.__obj=n},addEventListener:function(n,t){var e=this.__obj;if(e)switch(!0){case conbo.$&&e instanceof conbo.$:case window.$&&e instanceof window.$:e.on(n,t);break;case e instanceof conbo.EventDispatcher:e.addEventListener(n,t);break;default:n.split(" ").forEach(function(n){e.addEventListener(n,t)})}return this},removeEventListener:function(n,t){var e=this.__obj;if(e)switch(!0){case conbo.$&&e instanceof conbo.$:case window.$&&e instanceof window.$:e.off(n,t);break;case e instanceof conbo.obj:e.removeEventListener(n,t);break;default:n.split(" ").forEach(function(n){e.removeEventListener(n,t)})}return this}}),conbo.HeadlessApplication=conbo.EventDispatcher.extend({contextClass:conbo.Context,__construct:function(n){((n=conbo.clone(n||{})).app=this).context=new this.contextClass(n)},toString:function(){return"conbo.HeadlessApplication"}}).implement(conbo.IInjectable),__denumerate(conbo.HeadlessApplication.prototype),conbo.Context=conbo.EventDispatcher.extend({__construct:function(n){__definePrivateProperties(this,{__commands:n.commands||{},__singletons:n.singletons||{},__app:n.app,__namespace:n.namespace||n.app&&n.app.namespace,__parentContext:n.context}),this.addEventListener(conbo.Event.ALL,this.__allHandler)},get app(){return this.__app},get namespace(){return this.__namespace},get parentContext(){return this.__parentContext},createSubcontext:function(n,t,e){return new(n=n||conbo.Context)({context:this,app:this.app,namespace:this.namespace,commands:e?conbo.clone(this.__commands):undefined,singletons:t?conbo.clone(this.__singletons):undefined})},mapCommand:function(n,t){if(!n)throw new Error("eventType cannot be undefined");if(!t)throw new Error("commandClass for "+n+" cannot be undefined");return this.__commands[n]&&-1!=this.__commands[n].indexOf(t)||(this.__commands[n]=this.__commands[n]||[],this.__commands[n].push(t)),this},unmapCommand:function(n,t){if(!n)throw new Error("eventType cannot be undefined");if(t===undefined)return delete this.__commands[n],this;if(this.__commands[n]){var e=this.__commands[n].indexOf(t);if(-1!=e)return this.__commands[n].splice(e,1),this}},mapSingleton:function(n,t){if(!n)throw new Error("propertyName cannot be undefined");if(t===undefined&&conbo.warn("singletonClass for "+n+" is undefined"),conbo.isClass(t)){var e=conbo.rest(arguments);1==e.length&&t.prototype instanceof conbo.ConboClass&&e.push(this),this.__singletons[n]=new(Function.prototype.bind.apply(t,e))}else this.__singletons[n]=t;return this},unmapSingleton:function(n){if(!n)throw new Error("propertyName cannot be undefined");if(this.__singletons[n])return delete this.__singletons[n],this},mapConstant:function(n,t){return this.mapSingleton(n,t)},unmapConstant:function(n){return this.unmapSingleton(n)},addTo:function(n){return conbo.defineValues(n||{},{context:this})},injectSingletons:function(n){return __deprecated("injectSingletons","inject"),this.inject(n),this},inject:function(t){var n,e=1<arguments.length;for(var o in e&&(n=conbo.rest(arguments)),this.__singletons)(e?-1!=n.indexOf(o):o in t)&&function(n){Object.defineProperty(t,o,{configurable:!0,get:function(){return n}})}(this.__singletons[o]);return t},uninjectSingletons:function(n){return __deprecated("uninjectSingletons","uninject"),this.uninject(n),this},uninject:function(n){var t,e=1<arguments.length;for(var o in e&&(t=conbo.rest(arguments)),this.__singletons)(e?-1!=t.indexOf(o):o in n)&&Object.defineProperty(n,o,{configurable:!0,value:undefined});return n},destroy:function(){return conbo.assign(this,{__commands:undefined,__singletons:undefined,__app:undefined,__namespace:undefined,__parentContext:undefined}),this.removeEventListener(),this},toString:function(){return"conbo.Context"},__allHandler:function(o){var n=conbo.union(this.__commands.all||[],this.__commands[o.type]||[]);n.length&&conbo.forEach(n,function(n,t,e){this.__executeCommand(n,o)},this)},__executeCommand:function(n,t){var e;return e={event:t},new n(this.addTo(e)).execute(),null,this}}),__denumerate(conbo.Context.prototype),conbo.Hash=conbo.EventDispatcher.extend({__construct:function(t){if(t.source){this.addEventListener("change",function(n){t.source[n.property]=n.value},{scope:this})}conbo.assign(this,conbo.setDefaults({},t.source,this._defaults)),delete this._defaults},toJSON:conbo.jsonify,toString:function(){return"conbo.Hash"}}),__denumerate(conbo.Hash.prototype),conbo.LocalHash=conbo.Hash.extend({__construct:function(n){var t="ConboLocalHash",e=(n=conbo.defineDefaults(n,{name:t})).name,o=n.session?window.sessionStorage:window.localStorage;e==t&&conbo.warn("No name specified for "+this.toString()+', using "'+t+'"');this.addEventListener(conbo.ConboEvent.CHANGE,function(n){o.setItem(e,JSON.stringify(this.toJSON()))},{scope:this,priority:1e3}),n.source=e in o?JSON.parse(o.getItem(e)||"{}"):n.source||{},conbo.Hash.prototype.__construct.call(this,n)},flush:function(){return this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CHANGE)),this},toString:function(){return"conbo.LocalHash"}}),__denumerate(conbo.LocalHash.prototype),conbo.List=conbo.EventDispatcher.extend({itemClass:conbo.Hash,__construct:function(n){this.addEventListener(conbo.ConboEvent.ADD,this.__updateArrayAccess,{scope:this,priority:9999}).addEventListener(conbo.ConboEvent.REMOVE,this.__updateArrayAccess,{scope:this,priority:9999});conbo.assign(this,conbo.pick(n,["itemClass"])),this.source=n.source||[]},get source(){return this.__source||(this.__source=[]),this.__source},set source(n){this.__source=[],this.push.apply(this,conbo.toArray(n)),this.dispatchChange("source","length")},get length(){return this.source?this.source.length:0},push:function(n){var t=conbo.toArray(arguments);return t.length&&(this.source.push.apply(this.source,this.__applyItemClass(t)),this.__updateBindings(t),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.ADD)),this.dispatchChange("length")),this.length},pop:function(){if(this.length){var n=this.source.pop();return this.__updateBindings(n,!1),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.REMOVE)),this.dispatchChange("length"),n}},unshift:function(n){return n&&(this.source.unshift.apply(this.source,this.__applyItemClass(conbo.toArray(arguments))),this.__updateBindings(conbo.toArray(arguments)),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.ADD)),this.dispatchChange("length")),this.length},shift:function(){if(this.length){var n=this.source.shift();return this.__updateBindings(n,!1),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.REMOVE)),this.dispatchChange("length"),n}},slice:function(n,t){return n=n||0,conbo.isUndefined(t)&&(t=this.length),new conbo.List({source:this.source.slice(n,t)})},splice:function(n,t){n=n||0,conbo.isUndefined(t)&&(t=this.length);var e=conbo.rest(arguments,2),o=this.source.splice.apply(this.source,[n,t].concat(e));return o.length&&this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.REMOVE)),e.length&&this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.ADD)),(o.length||e.length)&&this.dispatchChange("length"),new conbo.List({source:o})},getItemAt:function(n){return this.source[n]},setItemAt:function(n,t){var e=this.length,o=this.source[n];return this.__updateBindings(o,!1),this.source[n]=t,this.__updateBindings(t),this.length>e&&(this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.ADD)),this.dispatchChange("length")),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CHANGE,{item:t})),o},sort:function(n){return this.source.sort(n),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CHANGE)),this},clone:function(){return new this.constructor(this.source)},toJSON:function(){return conbo.jsonify(this.source)},toArray:function(){return this.source.slice()},toString:function(){return"conbo.List"},__updateBindings:function(n,t){var e=!1===t?"removeEventListener":"addEventListener";for(n=(conbo.isArray(n)?n:[n]).slice();n.length;){var o=n.pop();o instanceof conbo.EventDispatcher&&o[e](conbo.ConboEvent.CHANGE,this.dispatchEvent,this)}},__updateArrayAccess:function(n){var t,e=function(t){Object.defineProperty(this,t,{get:function(){return this.getItemAt(t)},set:function(n){this.setItemAt(t,n)},configurable:!0,enumerable:!0})}.bind(this);for(t=0;t<this.length;t++)t in this||e(t);for(;t in this;)delete this[t++]},__applyItemClass:function(n){if(n instanceof Array){for(var t=0;t<n.length;t++)n[t]=this.__applyItemClass(n[t]);return n}return!conbo.isObject(n)||conbo.isClass(n)||n instanceof conbo.Class||(n=new this.itemClass({source:n,context:this.context})),n}}).implement(conbo.IInjectable);var listMethods=["forEach","map","find","findIndex","filter","reject","every","contains","invoke","indexOf","lastIndexOf","max","min","size","rest","last","without","shuffle","isEmpty","sortOn"],bo,co,eo,fo,go;function ho(n,t){return this[n]===t||(t&&conbo.isString(t)&&!isNaN(t)&&(t=parseFloat(t),isNaN(t)&&(t="")),this[n]=t),this}function io(n){return-1!=eo.indexOf(n)}function jo(n,t){conbo.isAccessor(n,t)||conbo.isFunc(n,t)||(n instanceof conbo.EventDispatcher?conbo.makeBindable(n,[t]):conbo.warn('It will not be possible to detect changes to "'+t+'" because "'+n.toString()+'" is not an EventDispatcher'))}function ko(n){return(n||"").trim().replace(/[^\w\._\s]/g,"")}function lo(n,t){return(conbo.isString(t)?ko(t).split("."):t).reduce(function(n,t){return n[t]},n)}listMethods.forEach(function(e){e in conbo&&(conbo.List.prototype[e]=function(){var n=[this.source].concat(conbo.toArray(arguments)),t=conbo[e].apply(conbo,n);return conbo.isArray(t)?new conbo.List({source:t,itemClass:this.itemClass}):t})}),__denumerate(conbo.List.prototype),conbo.LocalList=conbo.List.extend({__construct:function(n){var t="ConboLocalList",e=(n=conbo.defineDefaults(n,this.options,{name:t})).name,o=n.session?window.sessionStorage:window.localStorage;e==t&&conbo.warn("No name specified for "+this.toString()+', using "'+t+'"');this.addEventListener(conbo.ConboEvent.CHANGE,function(n){o.setItem(e,JSON.stringify(this))},{scope:this,priority:1e3}),n.source=e in o?JSON.parse(o.getItem(e)||"[]"):n.source||[],conbo.List.prototype.__construct.call(this,n)},flush:function(){return this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CHANGE)),this},toString:function(){return"conbo.LocalList"}}),__denumerate(conbo.LocalList.prototype),conbo.AttributeBindings=conbo.Class.extend({initialize:function(){this.cbAria.multiple=!0,this.cbClass.multiple=!0,this.cbStyle.multiple=!0,this.cbIncludeIn.raw=!0,this.cbExcludeFrom.raw=!0,this.cbRef.raw=!0,this.cbDetectChange.readOnly=!0},canHandleMultiple:function(n){var t=conbo.toCamelCase(n);return t in this&&this[t].multiple},cbShow:function(n,t){this.cbHide(n,conbo.isEmpty(t))},cbHide:function(n,t){conbo.isEmpty(t)?n.classList.remove("cb-hide"):n.classList.add("cb-hide")},cbInclude:function(n,t){this.cbExclude(n,conbo.isEmpty(t))},cbExclude:function(n,t){conbo.isEmpty(t)?n.classList.remove("cb-exclude"):n.classList.add("cb-exclude")},cbEnabled:function(n,t){n.disabled=!t},cbHtml:function(n,t){n.innerHTML=t},cbText:function(n,t){t=conbo.encodeEntities(t).replace(/\r?\n|\r/g,"<br/>"),n.innerHTML=t},cbClass:function(n,t,e,o){o=o||e.propertyName,conbo.isEmpty(t)?__ep(n).removeClass(o):__ep(n).addClass(o)},cbClasses:function(n,t){n.cbClasses&&__ep(n).removeClass(n.cbClasses),(n.cbClasses=t)&&__ep(n).addClass(t)},cbStyle:function(n,t,e,o){o||conbo.warn('cb-style attributes must specify one or more styles in the format cb-style="myProperty:style-name"'),o=conbo.toCamelCase(o),n.style[o]=t},cbRepeat:function(n,t,e,o){var i,r,c=conbo.toArray(arguments);__ep(n);(e=e||{}).context&&e.context.namespace&&(o=o||conbo.toCamelCase(n.tagName,!0),r=conbo.bindingUtils.getClass(o,e.context.namespace)),r=r||conbo.ItemRenderer,n.cbRepeat||(n.cbRepeat={});var s,a=n.cbRepeat.elements||[];if(n.cbRepeat.placeholder?s=n.cbRepeat.placeholder:(s=document.createComment(conbo.bindingUtils.removeAttributeAfterBinding?"":"cb-repeat"),n.parentNode.insertBefore(s,n),n.parentNode.removeChild(n)),n.cbRepeat.list!=t&&t instanceof conbo.List){var u;n.cbRepeat.list&&n.cbRepeat.list.removeEventListener("change",n.cbRepeat.changeHandler,{scope:this});var b=function(n){"length"===n.property?e.view.dispatchChange(e.propertyName):this.cbRepeat.apply(this,c)};n.cbRepeat.changeHandler=function(n){clearTimeout(u),u=setTimeout(b,0,n)},t.addEventListener("change",n.cbRepeat.changeHandler,{scope:this}),n.cbRepeat.list=t}switch(!0){case t instanceof Array:case t instanceof conbo.List:i=t;break;default:i=conbo.isIterable(t)?conbo.toArray(t):[]}for(;a.length;){var l=a.pop(),h=l.cbView||l.cbGlimpse;h?h.remove():l.parentNode.removeChild(l)}for(var d=0,f=i.length;d<f;++d){var p=i[d],v=n.cloneNode(!0);!conbo.isObject(p)||conbo.isIterable(p)||p instanceof conbo.Hash||(p=new conbo.Hash({source:p})),v.removeAttribute("cb-repeat");var m={data:p,el:v,index:d,isLast:d==i.length-1,list:i,className:"cb-repeat"},_=new r(conbo.assign(m,e));a.push(_.el)}var g=document.createDocumentFragment();a.forEach(function(n){g.appendChild(n)}),s.parentNode.insertBefore(g,s),n.cbRepeat.elements=a,n.cbRepeat.placeholder=s},cbDataset:function(n,t){conbo.isObject(t)&&conbo.assign(n.dataset,t)},cbData:function(n,t){n.cbGlimpse?n.cbGlimpse.data=t:this.cbDataset(n,t)},cbIncludeIn:function(n,t,e){var o=e.view,i=t.split(" "),r=function(){this.cbInclude(n,-1!=i.indexOf(o.currentState))}.bind(this);o.addEventListener("change:currentState",r,{scope:this}),r.call(this)},cbExcludeFrom:function(n,t,e){function o(){this.cbExclude(n,-1!=r.indexOf(i.currentState))}var i=e.view,r=t.split(" ");i.addEventListener("change:currentState",o,{scope:this}),o.call(this)},cbRemove:function(n,t){conbo.isEmpty(t)||n.parentNode.removeChild(n)},cbKeep:function(n,t){this.cbRemove(n,!t)},cbOnbind:function(n,t){n.addEventListener("bind",t)},cbJshref:function(t){"A"==t.tagName&&(t.onclick=function(n){return window.location=t.href,n.preventDefault(),!1})},cbDetectChange:function(t){function e(){i.removeClass("cb-changed cb-unchanged").addClass(n.querySelector(".cb-changed")?"cb-changed":"cb-unchanged")}var o=__ep(t),n=o.closest("form"),i=__ep(n),r=t.value||t.innerHTML;o.addEventListener("change input",function(){var n=(t.value||t.innerHTML)!=r;o.removeClass("cb-changed cb-unchanged").addClass(n?"cb-changed":"cb-unchanged"),e()}).addClass("cb-unchanged"),e()},cbValidate:function(r,t){var c;switch(!0){case conbo.isFunction(t):c=t;break;case conbo.isString(t):t=new RegExp(t);case conbo.isRegExp(t):c=function(n){return t.test(n)}}if(conbo.isFunction(c)){var s=__ep(r),a=s.closest("form"),u=function(t){return function(n){return n.split(/\s+/).filter(function(n){return t.test(n)}).join(" ")}};s.addEventListener("change input blur",function(){var n=r.value||r.innerHTML,t=c(n),e=!0===t,o=[];if(o.push(e?"cb-valid":"cb-invalid"),conbo.isString(t)&&o.push("cb-invalid-"+t),s.removeClass("cb-valid cb-invalid").removeClass(u(/^cb-invalid-/)).addClass(o.join(" ")),a){var i=__ep(a);i.removeClass("cb-valid cb-invalid").removeClass(u(/^cb-invalid-/)),(e=e&&!a.querySelector(".cb-invalid"))&&conbo.toArray(a.querySelectorAll("[required]")).forEach(function(n){if(!String(n.value||n.innerHTML).trim())return e=!1}),i.addClass(e?"cb-valid":"cb-invalid")}})}else conbo.warn(t+" cannot be used with cb-validate")},cbRestrict:function(n,i){n.cbRestrict&&n.removeEventListener("keypress",n.cbRestrict),n.cbRestrict=function(n){if(!n.ctrlKey){var t=n.keyCode||n.which,e=n.key||String.fromCharCode(t),o=i;conbo.isRegExp(o)||(o=new RegExp("["+o+"]","g")),e.match(o)||n.preventDefault()}},n.addEventListener("keypress",n.cbRestrict)},cbMaxChars:function(t,e){t.cbMaxChars&&t.removeEventListener("keypress",t.cbMaxChars),t.cbMaxChars=function(n){(t.value||t.innerHTML).length>=e&&n.preventDefault()},t.addEventListener("keypress",t.cbMaxChars)},cbAria:function(n,t,e,o){o||conbo.warn('cb-aria attributes must specify one or more name in the format cb-class="myProperty:aria-name"'),n.setAttribute("aria-"+o,t)},cbOnlongpress:function(n,t){function e(n){i&&(clearTimeout(i),i=0)}function o(n){if("click"!==n.type||0===n.button)return r=!1,i=setTimeout(function(){r=!0,t(new MouseEvent("longpress",n))},500),!1}var i,r=!1;n.addEventListener("mousedown",o),n.addEventListener("touchstart",o),n.addEventListener("click",function(n){if(i&&(clearTimeout(i),i=0),r)return!1}),n.addEventListener("mouseout",e),n.addEventListener("touchend",e),n.addEventListener("touchleave",e),n.addEventListener("touchcancel",e)},cbRef:function(n,t,e){e.view[t]=n}}),bo=new conbo.AttributeBindings,co={},eo=["cb-app","cb-view","cb-glimpse","cb-content"],fo=["cb","data","aria"],go=["cb"],conbo.BindingUtils=conbo.Class.extend({removeAttributeAfterBinding:!0,bindElement:function(t,e,o,i){var n=t instanceof conbo.EventDispatcher;if(!o)throw new Error("el is undefined");jo(t,e);var r,c,s=[];i=i||this.defaultParseFunction;var a=new conbo.EventProxy(o),u=o.tagName;switch(u){case"INPUT":case"SELECT":case"TEXTAREA":switch((o.type||u).toLowerCase()){case"checkbox":return o.checked=!!t[e],n&&(r="change:"+e,c=function(n){o.checked=!!n.value},t.addEventListener(r,c),s.push([t,r,c])),r="input change",c=function(n){ho.call(t,e,o.checked)},a.addEventListener(r,c),void s.push([a,r,c]);case"radio":o.value==t[e]&&(o.checked=!0),n&&(r="change:"+e,c=function(n){null==n.value&&(n.value=""),o.value==n.value&&(o.checked=!0)},t.addEventListener(r,c),s.push([t,r,c]));break;default:o.value=conbo.toValueString(t[e]),n&&(r="change:"+e,c=function(n){null==n.value&&(n.value=""),o.value!=n.value&&(o.value=conbo.toValueString(n.value))},t.addEventListener(r,c),s.push([t,r,c]))}r="input change",c=function(n){ho.call(t,e,o.value===undefined?o.innerHTML:o.value)},a.addEventListener(r,c),s.push([a,r,c]);break;case"CB-TEXT":var b=document.createTextNode(i(t[e]));o.parentNode.insertBefore(b,o),o.parentNode.removeChild(o),n&&(r="change:"+e,c=function(n){b.data=i(n.value)},t.addEventListener(r,c),s.push([t,r,c]));break;default:o.innerHTML=i(t[e]),n&&(r="change:"+e,c=function(n){var t=i(n.value);o.innerHTML=t},t.addEventListener(r,c),s.push([t,r,c]))}return s},unbindElement:function(n,t,e){return this},bindAttribute:function(t,e,o,n,i,r){var c=[];if(io(n))return c;if(!o)throw new Error("element is undefined");var s=n.split("-");if(!(1<s.length))return c;if("cb-bind"==n)return c=this.bindElement(t,e,o,i),this.removeAttributeAfterBinding&&o.removeAttribute(n),c;jo(t,e);var a,u,b=conbo.toArray(arguments).slice(5),l=conbo.toCamelCase(n),h="cb"==s[0],d=h&&l in bo,f=!d&&l in co,p=h&&2==s.length&&s[1]in o,v=bo;switch(i=i||this.defaultParseFunction,!0){case f:v=co;case d:if(!(t instanceof conbo.EventDispatcher))return conbo.warn("Source is not EventDispatcher"),this;var m=v[l];m.raw?m.apply(v,[o,e].concat(b)):(u=function(n){m.apply(v,[o,i(t[e])].concat(b))},a="change:"+e,t.addEventListener(a,u),u(),c.push([t,a,u]));break;case p:var _=s[1];switch(!0){case 0!==_.indexOf("on")&&conbo.isFunction(o[_]):conbo.warn(n+" is not a recognised attribute, did you mean cb-on"+_+"?");break;case 0===_.indexOf("on"):if(!conbo.isFunction(t[e]))return conbo.warn(e+" is not a function and cannot be bound to DOM events"),this;a=_.substr(2),u=t[e],o.addEventListener(a,u),c.push([o,a,u]);break;default:if(!(t instanceof conbo.EventDispatcher))return conbo.warn("Source is not EventDispatcher"),this;u=function(){var n;n=i(t[e]),n=conbo.isBoolean(o[_])?!!n:n,o[_]=n},a="change:"+e,t.addEventListener(a,u),u(),c.push([t,a,u]);var g=new conbo.EventProxy(o);u=function(){ho.call(t,e,o[_])},a="input change",g.addEventListener(a,u),c.push([g,a,u])}break;default:conbo.warn(n+" is not recognised or does not exist on specified element")}return"cb-repeat"!==n&&this.removeAttributeAfterBinding&&o.removeAttribute(n),c},applyAttribute:function(n,t){if(this.attributeExists(t)){var e=conbo.toCamelCase(t),o="cb"==t.split("-")[0]?bo:co,i=o[e];i.readOnly?i.call(o,n):conbo.warn(t+" attribute cannot be used without a value")}else conbo.warn(t+" attribute does not exist");return this},attributeExists:function(n){var t=conbo.toCamelCase(n);return t in bo||t in co},bindView:function(g){if(!g)throw new Error("view is undefined");g.__bindings&&this.unbindView(g);var y={view:g},E=[],w=this;g.subcontext&&g.subcontext.addTo(y);var n=g.context&&g.context.namespace;n&&this.applyViews(g,n,"glimpse").applyViews(g,n,"view");var t=[];g.querySelectorAll("[cb-repeat]").forEach(function(n){t=t.concat(conbo.toArray(n.querySelectorAll("*")))});var e=conbo.difference(g.querySelectorAll("*").concat([g.el]),t);return e.sort(function(n,t){var e=__ep(n).attributes.hasOwnProperty("cbRepeat"),o=__ep(t).attributes.hasOwnProperty("cbRepeat");return e&&o?0:e&&!o?-1:!e&&o?1:void 0}),e.forEach(function(m,n){var _=__ep(m).attributes;if(conbo.keys(_).length){var t=conbo.keys(_);-1!=t.indexOf("cbRepeat")&&(t=["cbRepeat"]),t.forEach(function(n){var t=conbo.toUnderscoreCase(n,"-"),e=t.split("-");if(!(e.length<2||-1==go.indexOf(e[0])||io(t))){var o=_[n].split(",");bo.canHandleMultiple(t)||(o=[o[0]]);for(var i=o.length,r=0;r<i;r++){var c,s=o[r]||"";if(!s){w.applyAttribute(m,t);break}var a,u=s.split("|"),b=u[0].split(":"),l=b[0],h=b[1],d=ko(l).split("."),f=d.pop();try{c=u[1]?lo(g,u[1]):undefined,c=conbo.isFunction(c)?c:undefined}catch(n){}try{a=d.length?lo(g,d):g}catch(n){}if(!a)return void conbo.warn(l+" is not defined in this View");var p=conbo.defineValues({propertyName:f},y),v=[a,f,m,t,c,p,h];E=E.concat(w.bindAttribute.apply(w,v))}conbo.defer(function(){var n;(n=document.createEvent("CustomEvent")).initCustomEvent("bind",!1,!1,{}),m.dispatchEvent(n)})}})}}),__definePrivateProperty(g,"__bindings",E),this},unbindView:function(n){if(!n)throw new Error("view is undefined");if(!n.__bindings||!n.__bindings.length)return this;for(var t=n.__bindings;t.length;){var e=t.pop();try{e[0].removeEventListener(e[1],e[2])}catch(n){}}return delete n.__bindings,this},applyViews:function(i,n,t){if(-1==["view","glimpse"].indexOf(t=t||"view"))throw new Error(t+" is not a valid type parameter for applyView");conbo[t.charAt(0).toUpperCase()+t.slice(1)];var e=conbo.isElement(i)?i:i.el;for(var o in n){var r=this.getClass(o,n),c=conbo.isClass(r,conbo.View),s=conbo.isClass(r,conbo.Glimpse)&&!c;if("glimpse"==t&&s||"view"==t&&c){var a=conbo.toKebabCase(o);conbo.toArray(e.querySelectorAll(a+":not(.cb-"+t+"):not([cb-repeat]), [cb-"+t+"="+o+"]:not(.cb-"+t+"):not([cb-repeat])")).forEach(function(n){var t=__ep(n);if(!t.closest("[cb-repeat]")){var e=t.closest(".cb-view"),o=e?e.cbView.subcontext:i.subcontext;new r({el:n,context:o})}})}}return this},bindProperty:function(n,t,e,o,i){if(!(n instanceof conbo.EventDispatcher))throw new Error(t+" source is not EventDispatcher");return o=o||t,jo(n,t),n.addEventListener("change:"+t,function(n){e instanceof conbo.EventDispatcher?ho.call(e,o,n.value):e[o]=n.value}),i&&e instanceof conbo.EventDispatcher&&this.bindProperty(e,o,n,t),this},bindSetter:function(n,t,e){if(!(n instanceof conbo.EventDispatcher))throw new Error("Source is not EventDispatcher");if(!conbo.isFunction(e)){if(!(e&&t in e))throw new Error("Invalid setter function");e=e[t]}return jo(n,t),n.addEventListener("change:"+t,function(n){e(n.value)}),this},defaultParseFunction:function(n){return void 0===n?"":n},getClass:function(n,t){if(n&&t)try{var e=t[n];if(conbo.isClass(e))return e}catch(n){}},registerAttribute:function(n,t,e,o){if(!conbo.isString(n)||!conbo.isFunction(t))return conbo.warn("registerAttribute: both 'name' and 'handler' parameters are required"),this;var i=conbo.toUnderscoreCase(n).split("_");if(i.length<2)return conbo.warn("registerAttribute: "+n+" does not include a namespace, e.g. "+conbo.toCamelCase("my-"+n)),this;var r=i[0];return-1!=fo.indexOf(r)?conbo.warn("registerAttribute: custom attributes cannot to use the "+r+" namespace"):(go=conbo.union(go,[r]),conbo.assign(t,{readOnly:!!e,raw:!!o}),co[n]=t),this},registerAttributes:function(n,t){for(var e in n)this.addAttribute(e,n[e],t);return this},parseTemplate:function(n){return(n||"").replace(/{{(.+?)}}/g,function(n,t){return'<cb-text cb-bind="'+t.trim()+'"></cb-text>'})},toString:function(){return"conbo.BindingUtils"}}),conbo.bindingUtils=new conbo.BindingUtils,conbo.MutationObserver=conbo.EventDispatcher.extend({initialize:function(){this.bindAll()},observe:function(n){if(this.disconnect(),n){var t=window.MutationObserver||window.WebKitMutationObserver;if(t){var e=new t(function(n,t){var e=n[0].addedNodes,o=n[0].removedNodes;e.length&&this.__addHandler(conbo.toArray(e)),n[0].removedNodes.length&&this.__removeHandler(conbo.toArray(o))}.bind(this));e.observe(n,{childList:!0,subtree:!0}),this.__mo=e}else n.addEventListener("DOMNodeInserted",this.__addHandler),n.addEventListener("DOMNodeRemoved",this.__removeHandler),this.__el=n;return this}},disconnect:function(){var n=this.__mo,t=this.__el;return n&&n.disconnect(),t&&(t.removeEventListener("DOMNodeInserted",this.__addHandler),t.removeEventListener("DOMNodeRemoved",this.__removeHandler)),this},__addHandler:function(n){var t=conbo.isArray(n)?n:[n.target];this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.ADD,{nodes:t}))},__removeHandler:function(n){var t=conbo.isArray(n)?n:[n.target];this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.REMOVE,{nodes:t}))}}),conbo.ElementProxy=conbo.EventProxy.extend({getAttributes:function(){var n=this.__obj,t={};return n&&conbo.forEach(n.attributes,function(n){t[conbo.toCamelCase(n.name)]=n.value}),t},setAttributes:function(n){var e=this.__obj;return e&&n&&conbo.forEach(n,function(n,t){e.setAttribute(conbo.toKebabCase(t),n)}),this},get attributes(){return this.getAttributes()},set attributes(n){return this.setAttributes(n)},get cbAttributes(){var n=this.__obj,t={};return n&&conbo.forEach(n.attributes,function(n){0===n.name.indexOf("cb-")&&(t[conbo.toCamelCase(n.name.substr(3))]=n.value)}),t},addClass:function(n){var t=this.__obj;if(t instanceof Element&&n)for(var e=n.trim().split(" ");n=e.pop();)t.classList.add(n);return this},removeClass:function(n){var t=this.__obj;if(t instanceof Element&&n){conbo.isFunction(n)&&(n=n(t.className));for(var e=n.trim().split(" ");n=e.pop();)t.classList.remove(n)}return this},hasClass:function(n){var t=this.__obj;return!!(t instanceof Element&&n)&&t.classList.contains(n)},closest:function(n){var t,e,o=this.__obj;if(o)for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(n){return"function"==typeof document.body[n]&&(t=n,!0)});o;){if((e=o.parentElement)&&e[t](n))return e;o=e}}}),conbo.IDataRenderer={data:undefined,index:-1,isLast:!1,list:undefined},conbo.Glimpse=conbo.EventDispatcher.extend({__construct:function(n){this.__setEl(n.el||document.createElement(this.tagName)),this.template&&(this.el.innerHTML=this.template)},get tagName(){return this.__tagName||"div"},set tagName(n){__definePrivateProperty(this,"__tagName",n)},get el(){return this.__el},toString:function(){return"conbo.Glimpse"},__setEl:function(n){var t=conbo.assign({},this.attributes);for(var e in this.id&&!n.id&&(t.id=this.id),n.classList.add("cb-glimpse"),n.classList.add(this.__className),n.cbGlimpse=this,t)n.setAttribute(conbo.toKebabCase(e),t[e]);return this.style&&(n.style=conbo.assign(n.style,this.style)),__definePrivateProperty(this,"__el",n),this}}),__denumerate(conbo.Glimpse.prototype);var View__templateCache={};return conbo.View=conbo.Glimpse.extend({__construct:function(n){(n=conbo.clone(n)||{}).className&&this.className&&(n.className+=" "+this.className);var t=conbo.union(["attributes","className","data","id","style","tagName","template","templateUrl","templateCacheEnabled","autoInitTemplate"],conbo.intersection(conbo.variables(this,!0),conbo.variables(n)));conbo.assign(this,conbo.pick(n,t)),conbo.makeBindable(this),this.context=n.context,this.__setEl(n.el||document.createElement(this.tagName))},__postInitialize:function(n){__definePrivateProperty(this,"__initialized",!0),this.__content=this.el.innerHTML,!1!==this.autoInitTemplate&&this.initTemplate()},get el(){return this.__el},get initialized(){return!!this.__initialized},get parent(){if(this.initialized)return this.__getParent(".cb-view")},get parentApp(){if(this.initialized)return this.__getParent(".cb-app")},get hasTemplate(){return!(!this.template&&!this.templateUrl)},get content(){return this.querySelector("[cb-content]")},get hasContent(){return!!this.content},get body(){return this.content||this.el},get subcontext(){return this.__subcontext||this.context},set subcontext(n){this.__subcontext=n},get currentState(){return this.__currentState||""},set currentState(n){this.el&&(this.currentState&&this.el.classList.remove("cb-state-"+this.currentState),n&&this.el.classList.add("cb-state-"+n)),this.__currentState=n,this.dispatchChange("currentState")},templateComplete:function(){},creationComplete:function(){},querySelector:function(n,t){return this.querySelectorAll(n,t)[0]},querySelectorAll:function(e,n){if(this.el){var o=conbo.toArray(this.el.querySelectorAll(e));if(!n){var t=this.el.querySelectorAll(".cb-view, [cb-view], [cb-app]");conbo.forEach(t,function(n){var t=conbo.toArray(n.querySelectorAll(e));o=conbo.difference(o,t.concat(n))})}return o}return[]},detach:function(){try{var n=this.el;n.parentNode&&(n.parentNode.removeChild(n),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.DETACH)))}catch(n){}return this},remove:function(){this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.REMOVE)),this.data&&(this.data=undefined),this.subcontext&&this.subcontext!=this.context&&(this.subcontext.destroy(),this.subcontext=undefined),this.context&&(this.context.uninject(this),this.context.removeEventListener(undefined,undefined,this),this.context=undefined);for(var n=this.querySelectorAll(".cb-view",!0);n.length;){var t=n.pop();try{t.cbView.remove()}catch(n){}}return this.unbindView().detach().removeEventListener().destroy(),this},appendView:function(n){if(1<arguments.length)return conbo.forEach(arguments,function(n,t,e){this.appendView(n)},this),this;if("function"==typeof n&&(n=new n(this.context)),!(n instanceof conbo.View))throw new Error("Parameter must be conbo.View class or instance of it");return this.body.appendChild(n.el),this},prependView:function(n){if(1<arguments.length)return conbo.forEach(arguments,function(n,t,e){this.prependView(n)},this),this;if("function"==typeof n&&(n=new n(this.context)),!(n instanceof conbo.View))throw new Error("Parameter must be conbo.View class or instance of it");var t=this.body.firstChild;return t?this.body.insertBefore(n.el,t):this.appendView(n),this},bindView:function(){return conbo.bindingUtils.bindView(this),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.BIND)),this},unbindView:function(){return conbo.bindingUtils.unbindView(this),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.UNBIND)),this},initTemplate:function(){var n=this.template;if(this.templateUrl)this.loadTemplate();else{conbo.isFunction(n)&&(n=n(this));var t=this.el;conbo.isString(n)?t.innerHTML=this.__parseTemplate(n):/{{(.+?)}}/.test(t.textContent)&&(t.innerHTML=this.__parseTemplate(t.innerHTML)),this.__initView()}return this},loadTemplate:function(e){e=e||this.templateUrl;var o=this.body;if(this.unbindView(),!1!==this.templateCacheEnabled&&View__templateCache[e])return o.innerHTML=View__templateCache[e],this.__initView(),this;return conbo.httpRequest({url:e,dataType:"text"}).then(function(n){var t=this.__parseTemplate(n.result);!1!==this.templateCacheEnabled&&(View__templateCache[e]=t),o.innerHTML=t,this.__initView()}.bind(this),function(n){o.innerHTML="",this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.TEMPLATE_ERROR)),this.__initView()}.bind(this)),this},toString:function(){return"conbo.View"},__setEl:function(n){if(conbo.isElement(n)){var t=conbo.assign({},this.attributes);this.id&&!n.id&&(t.id=this.id),this.style&&conbo.assign(n.style,this.style);var e=__ep(n);return n.cbView=this,e.addClass("cb-view").addClass(this.className).addClass(this.__className).setAttributes(t),this.currentState&&e.addClass("cb-state-"+this.currentState),__definePrivateProperty(this,"__el",n),this}conbo.error("Invalid element passed to View")},__initView:function(){return this.hasTemplate&&this.hasContent&&(this.content.innerHTML=this.__content),delete this.__content,this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.TEMPLATE_COMPLETE)),this.templateComplete(),this.bindView(),conbo.defer(function(){this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CREATION_COMPLETE)),this.creationComplete()},this),this},__getParent:function(n){var t=__ep(this.el).closest(n);if(t)return t.cbView},__parseTemplate:function(n){return conbo.bindingUtils.parseTemplate(n)}}),__denumerate(conbo.View.prototype),conbo.ItemRenderer=conbo.View.extend().implement(conbo.IDataRenderer),conbo.Application=conbo.View.extend({__construct:function(n){n=conbo.clone(n)||{},this.namespace instanceof conbo.Namespace||(this.namespace=conbo()),n.app=this,n.context=new this.contextClass(n),this.addEventListener(conbo.ConboEvent.CREATION_COMPLETE,this.__creationComplete,{scope:this,once:!0}),conbo.View.prototype.__construct.call(this,n)},__creationComplete:function(n){this.initialView&&this.appendView(this.initialView)},get initialView(){if("function"==typeof this.__initialView){var n=conbo.assign({},this.initialViewOptions,{context:this.context});this.initialView=new this.__initialView(n)}return this.__initialView},set initialView(n){this.__initialView=n},get initialViewOptions(){return this.__initialViewOptions||{}},set initialViewOptions(n){this.__initialViewOptions=n},get contextClass(){return this.__contextClass||conbo.Context},set contextClass(n){this.__contextClass=n},get observeEnabled(){return!!this.__mo},set observeEnabled(n){var t;if(n!=this.observeEnabled)return n?((t=new conbo.MutationObserver).observe(this.el),t.addEventListener(conbo.ConboEvent.ADD,function(n){conbo.bindingUtils.applyViews(this,this.namespace).applyViews(this,this.namespace,"glimpse")},{scope:this}),this.__mo=t):this.__mo&&((t=this.__mo).removeEventListener(),t.disconnect(),delete this.__mo),this.dispatchChange("observeEnabled"),this},toString:function(){return"conbo.Application"},__setEl:function(n){return conbo.View.prototype.__setEl.call(this,n),__ep(this.el).addClass("cb-app"),this}}),__denumerate(conbo.Application.prototype),conbo.Command=conbo.ConboClass.extend({__construct:function(n){this.event=n.event||{}},execute:function(){},toString:function(){return"conbo.Command"}}).implement(conbo.IInjectable),__denumerate(conbo.Command.prototype),conbo.httpRequest=function(options){if(conbo.isString(options)&&(options={url:options,data:arguments[1],method:arguments[2]}),!conbo.isObject(options)||!options.url)throw new Error("httpRequest called without specifying a URL");return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest,aborted,url=options.url,method=(options.method||options.type||"GET").toUpperCase(),data=options.data||options.body,headers=options.headers||{},timeoutTimer,contentType=conbo.getValue(headers,"Content-Type",!1)||options.contentType||conbo.CONTENT_TYPE_JSON,dataType=options.dataType||conbo.DATA_TYPE_JSON,decodeFunction=options.decodeFunction||options.dataFilter,getXml=function(){if("document"===xhr.responseType)return xhr.responseXML;var n=xhr.responseXML&&"parsererror"===xhr.responseXML.documentElement.nodeName;return""!==xhr.responseType||n?null:xhr.responseXML},getResult=function(){var result=xhr.response||xhr.responseText||getXml(xhr);if(conbo.isFunction(decodeFunction))result=decodeFunction(result);else switch(dataType){case conbo.DATA_TYPE_SCRIPT:(function(){eval(result)}).call(options.scope||window);break;case conbo.DATA_TYPE_JSON:try{result=JSON.parse(result)}catch(n){result=undefined}break;case conbo.DATA_TYPE_TEXT:}var resultClass=options.resultClass;if(!resultClass&&options.makeObjectsBindable)switch(!0){case conbo.isArray(result):resultClass=conbo.List;break;case conbo.isObject(result):resultClass=conbo.Hash}return resultClass&&(result=new resultClass({source:result})),result},getResponseHeaders=function(){var n=xhr.getAllResponseHeaders(),o={};return n.split("\r\n").forEach(function(n){var t=n.indexOf(":"),e=n.substr(0,t).trim();o[e]=n.substr(t+1).trim()}),o},errorHandler=function(){clearTimeout(timeoutTimer);var n={fault:getResult(),responseHeaders:getResponseHeaders(),status:xhr.status,method:method,url:url,xhr:xhr};reject(new conbo.ConboEvent(conbo.ConboEvent.FAULT,n))},loadHandler=function(){if(!aborted){clearTimeout(timeoutTimer);var n=1223===xhr.status?204:xhr.status;if(0===n||400<=n)errorHandler();else{var t={result:getResult(),responseHeaders:getResponseHeaders(),status:n,method:method,url:url,xhr:xhr};resolve(new conbo.ConboEvent(conbo.ConboEvent.RESULT,t))}}},readyStateChangeHandler=function(){4===xhr.readyState&&conbo.defer(loadHandler)};if("GET"!==method&&"HEAD"!==method)conbo.getValue(headers,"Content-Type",!1)||(headers["Content-Type"]=contentType),contentType==conbo.CONTENT_TYPE_JSON&&conbo.isObject(data)&&(data=JSON.stringify(data));else if("GET"===method&&conbo.isObject(data)){var query=conbo.toQueryString(data);query&&(url+="?"+query),data=undefined}for(var key in"onload"in xhr?xhr.onload=loadHandler:xhr.onreadystatechange=readyStateChangeHandler,xhr.onerror=errorHandler,xhr.onprogress=function(){},xhr.onabort=function(){aborted=!0},xhr.ontimeout=errorHandler,xhr.open(method,url,!0,options.username,options.password),xhr.withCredentials=!!options.withCredentials,0<options.timeout&&(timeoutTimer=setTimeout(function(){aborted||(aborted=!0,xhr.abort("timeout"),errorHandler())},options.timeout)),headers)headers.hasOwnProperty(key)&&xhr.setRequestHeader(key,headers[key]);"responseType"in options&&(xhr.responseType=options.responseType),"function"==typeof options.beforeSend&&options.beforeSend(xhr),xhr.send(data||null)})},conbo.HttpService=conbo.EventDispatcher.extend({__construct:function(n){n=conbo.setDefaults(n,{contentType:conbo.CONTENT_TYPE_JSON}),conbo.assign(this,conbo.setDefaults(conbo.pick(n,"rootUrl","contentType","dataType","headers","encodeFunction","decodeFunction","resultClass","makeObjectsBindable"),{dataType:"json"}));["POST","GET","PUT","PATCH","DELETE"].forEach(function(i){this[i.toLowerCase()]=function(n,t,e,o){return this.call(n,t,i,o)}},this),conbo.EventDispatcher.prototype.__construct.apply(this,arguments)},get rootUrl(){return this._rootUrl||""},set rootUrl(n){(n=String(n))&&"/"!=n.slice(-1)&&(n+="/"),this._rootUrl=n},call:function(n,o,i,r){var c=this;return o=conbo.clone(o||{}),n=this.parseUrl(n,o),o=this.encodeFunction(o,i),new Promise(function(t,e){conbo.httpRequest({data:o,type:i||"GET",headers:c.headers,url:(c.rootUrl+n).replace(/\/$/,""),contentType:c.contentType||conbo.CONTENT_TYPE_JSON,dataType:c.dataType,dataFilter:c.decodeFunction,resultClass:r||c.resultClass,makeObjectsBindable:c.makeObjectsBindable}).then(function(n){c.dispatchEvent(n),t(n)}).catch(function(n){c.dispatchEvent(n),e(n)})})},addCommand:function(t,e,o){return conbo.isObject(t)&&(e=t.method,o=t.resultClass,t=t.command),this[conbo.toCamelCase(t)]=function(n){return this.call(t,n,e,o)},this},addCommands:function(n){return conbo.isArray(n)&&n.forEach(function(n){this.addCommand(n)},this),this},encodeFunction:function(n,t){return n},parseUrl:function(n,e){var o=n,t=o.match(/:\b\w+\b/g);return t&&t.forEach(function(n){if(!((n=n.substr(1))in e))throw new Error('Property "'+n+'" required but not found in data')}),conbo.keys(e).forEach(function(n){var t=new RegExp(":\\b"+n+"\\b","g");t.test(o)&&(o=o.replace(t,e[n]),delete e[n])}),o},toString:function(){return"conbo.HttpService"}}).implement(conbo.IInjectable),conbo.ISyncable={load:conbo.notImplemented,save:conbo.notImplemented,destroy:conbo.notImplemented},conbo.RemoteHash=conbo.Hash.extend({__construct:function(n){(n=conbo.defineDefaults(n,this.options)).context&&(this.context=n.context),this.preinitialize(n),this._httpService=new conbo.HttpService(n),this._command=n.command;this._httpService.addEventListener(conbo.ConboEvent.RESULT,function(n){conbo.makeBindable(this,conbo.variables(n.result)),conbo.assign(this,n.result),this.dispatchEvent(n)},{scope:this}).addEventListener(conbo.ConboEvent.FAULT,this.dispatchEvent,{scope:this}),__denumerate(this),conbo.Hash.prototype.__construct.apply(this,arguments)},load:function(n){return n=arguments.length?n:this.toJSON(),this._httpService.call(this._command,n,"GET"),this},save:function(){return this._httpService.call(this._command,this.toJSON(),"POST"),this},destroy:function(){return this._httpService.call(this._command,this.toJSON(),"DELETE"),this},toString:function(){return"conbo.RemoteHash"}}).implement(conbo.ISyncable),__denumerate(conbo.HttpService.prototype),conbo.RemoteList=conbo.List.extend({__construct:function(n){n=conbo.defineDefaults(n,this.options),this.context=n.context,this._httpService=new conbo.HttpService(n),this._command=n.command;this._httpService.addEventListener(conbo.ConboEvent.RESULT,function(n){this.source=n.result,this.dispatchEvent(n)},{scope:this}).addEventListener(conbo.ConboEvent.FAULT,this.dispatchEvent,{scope:this}),__denumerate(this),conbo.List.prototype.__construct.apply(this,arguments)},load:function(){return this._httpService.call(this._command,this.toJSON(),"GET"),this},save:function(){return this._httpService.call(this._command,this.toJSON(),"POST"),this},destroy:function(){return this},toString:function(){return"conbo.RemoteList"}}).implement(conbo.ISyncable,conbo.IPreinitialize),__denumerate(conbo.HttpService.prototype),conbo.History=conbo.EventDispatcher.extend({__construct:function(n){this.handlers=[],this.location=window.location,this.history=window.history,this.bindAll("__checkUrl")},start:function(n){return n=n||{},window.addEventListener("hashchange",this.__checkUrl),this.useHashBang=!!n.useHashBang,this.fragment=this.__getFragment(),!1!==n.trigger&&this.__loadUrl(),this},stop:function(){return window.removeEventListener("hashchange",this.__checkUrl),this},addRoute:function(n,t){return this.handlers.unshift({route:n,callback:t}),this},getPath:function(){var n=this.location.href.match(/#!?(.*)$/);return n?n[1]:""},setPath:function(n,t){if(t=t||{},n=this.__getFragment(n),this.fragment!==n){var e=this.location,o=this.useHashBang?"#!/":"#/";if(this.fragment=n,t.replace){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+o+n)}else e.hash=o+n;return t.trigger&&this.__loadUrl(n),this}},__checkUrl:function(n){var t=this.__getFragment()!==this.fragment;return t&&(this.__loadUrl(),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CHANGE))),!t},__getFragment:function(n){return(n||this.getPath()).replace(/^#!|^[#\/]|\s+$/g,"")},__loadUrl:function(n){var t=this.fragment=this.__getFragment(n),e=conbo.some(this.handlers,function(n){if(n.route.test(t))return n.callback(t),!0});return e||this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.FAULT)),e}}),conbo.Router=conbo.EventDispatcher.extend({__construct:function(n){n.routes&&(this.routes=n.routes),this.historyClass=conbo.History,this.context=n.context},start:function(n){return this.__history||(this.__history=new this.historyClass,this.__bindRoutes(),this.__history.addEventListener(conbo.ConboEvent.FAULT,this.dispatchEvent,{scope:this}).addEventListener(conbo.ConboEvent.CHANGE,this.dispatchEvent,{scope:this}).start(n),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.START))),this},stop:function(){return this.__history&&(this.__history.removeEventListener().stop(),delete this.__history,this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.STOP))),this},addRoute:function(i,r,c){var s=conbo.isRegExp(i)?i:this.__routeToRegExp(i);return c=c||this[r],conbo.isFunction(r)&&(c=r,r=""),c=c||this[r],this.__history.addRoute(s,function(n){var t=this.__extractParameters(s,n),e=conbo.isString(i)?conbo.object((i.match(/:\w+/g)||[]).map(function(n){return n.substr(1)}),t):{};c&&c.apply(this,t);var o={router:this,route:s,name:r,parameters:t,params:e,path:n};this.dispatchEvent(new conbo.ConboEvent("route:"+r,o)),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.ROUTE,o))}.bind(this)),this},setPath:function(n,t){return t=conbo.setDefaults({},t,{trigger:!0}),this.__history.setPath(n,t),this},get path(){return this.__history?this.__history.getPath():""},set path(n){return this.setPath(n)},toString:function(){return"conbo.Router"},__bindRoutes:function(){if(this.routes)for(var n,t=conbo.keys(this.routes);null!=(n=t.pop());)this.addRoute(n,this.routes[n])},__routeToRegExp:function(n){return n=n.replace(/^\/+|\/+$/g,"").replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(n,t){return t?n:"([^/]+)"}).replace(/\*\w+/g,"(.*?)"),new RegExp("^"+n+"$")},__extractParameters:function(n,t){var e=n.exec(t).slice(1);return conbo.map(e,function(t){if(t)try{return decodeURIComponent(t)}catch(n){return unescape(t)}return null})}}).implement(conbo.IInjectable),__denumerate(conbo.Router.prototype),conbo.ready(function(){conbo.isNode||conbo.info("%c "+conbo.toString()+" ","font-weight:bold; background-color:#069; color:white;","https://conbo.mesmotronic.com")}),conbo});