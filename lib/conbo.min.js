!function(t,n){var e;try{t=window,e=document}catch(t){}"function"==typeof define&&define.amd?define("conbo",function(){return n(t,e)}):"undefined"!=typeof module&&module.exports?(module.exports=n(t,e),exports.default=module.exports,exports.__esModule=!0):t.conbo=n(t,e)}(this,function(window,document,undefined){"use strict";var __namespaces={},conbo=function(t){t&&conbo.isString(t)||(t="default"),__namespaces[t]||(__namespaces[t]=new conbo.Namespace);var n=__namespaces[t],e=conbo.rest(arguments),o=e.pop();if(1==arguments.length&&conbo.isFunction(arguments[0])&&(o=arguments[0]),conbo.isFunction(o)){var i=o.apply(n,e);conbo.isObject(i)&&!conbo.isArray(i)&&n.import(i)}return n};function k(t){if(!(this instanceof k))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Parameter must be a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],q(t,this)}function l(o,i){for(;3===o._state;)o=o._value;0!==o._state?(o._handled=!0,setTimeout(function(){var t=1===o._state?i.onFulfilled:i.onRejected;if(null!==t){var e;try{e=t(o._value)}catch(t){return void n(i.promise,t)}m(i.promise,e)}else(1===o._state?m:n)(i.promise,o._value)},0)):o._deferreds.push(i)}function m(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof k)return e._state=3,e._value=t,void o(e);if("function"==typeof i)return void q(conbo.bind(i,t),e)}e._state=1,e._value=t,o(e)}catch(t){n(e,t)}}function n(t,n){t._state=2,t._value=n,o(t)}function o(t){2===t._state&&t._deferreds.length;for(var n=0,e=t._deferreds.length;n<e;n++)l(t,t._deferreds[n]);t._deferreds=null}function p(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function q(t,e){var o=!1;try{t(function(t){o||(o=!0,m(e,t))},function(t){o||(o=!0,n(e,t))})}catch(t){if(o)return;o=!0,n(e,t)}}conbo.conbo=conbo,conbo.VERSION="4.3.28",conbo.toString=function(){return"ConboJS "+this.VERSION},"Promise"in window||(k.prototype.catch=function(t){return this.then(null,t)},k.prototype.then=function(t,n){var e=new this.constructor(conbo.noop);return l(this,new p(t,n,e)),e},k.all=function(n){return new k(function(o,i){if(!conbo.isArray(n))return i(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(n);if(0===r.length)return o([]);var c=r.length;function s(n,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void e.call(t,function(t){s(n,t)},i)}r[n]=t,0==--c&&o(r)}catch(t){i(t)}}for(var t=0;t<r.length;t++)s(t,r[t])})},k.resolve=function(n){return n&&"object"==typeof n&&n.constructor===k?n:new k(function(t){t(n)})},k.reject=function(e){return new k(function(t,n){n(e)})},k.race=function(i){return new k(function(t,n){if(!conbo.isArray(i))return n(new TypeError("Promise.race accepts an array"));for(var e=0,o=i.length;e<o;e++)k.resolve(i[e]).then(t,n)})},window.Promise=k),"finally"in window.Promise.prototype||(window.Promise.prototype.finally=function(n){var e=this.constructor;return this.then(function(t){return e.resolve(n()).then(function(){return t})},function(t){return e.resolve(n()).then(function(){return e.reject(t)})})}),conbo.Promise=window.Promise,conbo.CONTENT_TYPE_JSON="application/json",conbo.CONTENT_TYPE_FORM="application/x-www-form-urlencoded",conbo.DATA_TYPE_JSON="json",conbo.DATA_TYPE_SCRIPT="script",conbo.DATA_TYPE_TEXT="text",conbo.NAMESPACE_DEFAULT="default";var __dispatchChange=function(t,n){if(t instanceof conbo.EventDispatcher){var e={property:n,value:t[n]};t.dispatchEvent(new conbo.ConboEvent("change:"+n,e)),t.dispatchEvent(new conbo.ConboEvent("change",e))}},__defineBindableProperty=function(t,n,e){if(!conbo.isAccessor(t,n)){arguments.length<3&&(e=t[n]);var o=0!=n.indexOf("_"),i="__"+n;__definePrivateProperty(t,i,e);Object.defineProperty(t,n,{enumerable:o,configurable:!0,get:function(){return this[i]},set:function(t){conbo.isEqual(t,this[i])||(this[i]=t,__dispatchChange(this,n))}})}},__definePrivateProperty=function(t,n,e){2==arguments.length&&(e=t[n]),Object.defineProperty(t,n,{enumerable:!1,configurable:!0,writable:!0,value:e})},__definePrivateProperties=function(t,n){for(var e in n)__definePrivateProperty(t,e,n[e])},__denumerate=function(e){var n=arguments[1];(n instanceof RegExp?conbo.filter(conbo.keys(e),function(t){return n.test(t)}):1<arguments.length?conbo.rest(arguments):conbo.keys(e)).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t)||{value:e[t],configurable:!0,writable:!0};n.enumerable=!1,Object.defineProperty(e,t,n)})},__deprecated=function(t,n){conbo.warn("Deprecation warning: "+t+" is deprecated, please use "+n)},__ep=function(t){return new conbo.ElementProxy(t)};function Zi(t,e,o){if("*"==t&&(t="all"),this.__queue){var i,r=this,n=function(t,n){for(i=0;i<t.length;i++)e&&e!=t[i].handler||o&&o!=t[i].scope||t.splice(i--,1);t.length||delete r.__queue[n]};t in r.__queue?n(r.__queue[t],t):t||conbo.forEach(r.__queue,n,r)}}!function(){var i=Array.prototype,t=Object.prototype,o=i.push,c=i.slice,r=i.concat,l=t.toString,e=t.hasOwnProperty,s=i.indexOf,a=i.lastIndexOf,u=i.map,b=(i.reduce,i.reduceRight,i.filter),h=i.every,d=i.some,n=Array.isArray,f=Object.keys;conbo.forEach=function(t,n,e){if(t!=undefined){var o,i;if(conbo.isIterable(t)){for(o=0,i=t.length;o<i;++o)if(!1===n.call(e,t[o],o,t))return}else{var r=conbo.keys(t);for(o=0,i=r.length;o<i;o++)if(!1===n.call(e,t[r[o]],r[o],t))return}return t}};var p=conbo.forEach;conbo.map=function(t,n,e){return u.call(t||[],n,e)},conbo.indexOf=function(t,n){return s.call(t||[],n)},conbo.lastIndexOf=function(t,n){return a.call(t||[],n)},conbo.find=function(t,o,i){var r;return conbo.some(t,function(t,n,e){if(o.call(i,t,n,e))return r=t,!0}),r},conbo.findIndex=function(t,n,e){var o=conbo.find(t,n,e);return s.call(t,o)},conbo.filter=function(t,n,e){return b.call(t||[],n,e)},conbo.reject=function(t,o,i){return conbo.filter(t,function(t,n,e){return!o.call(i,t,n,e)},i)},conbo.every=function(t,n,e){return h.call(t||[],n||conbo.identity,e)},conbo.some=function(t,n,e){return d.call(t||[],n||conbo.identity,e)};conbo.some;conbo.contains=function(t,n){return t&&"indexOf"in t?-1!=t.indexOf(n):-1!=s.call(t||[],n)},conbo.invoke=function(t,n){var e=c.call(arguments,2),o=conbo.isFunction(n);return conbo.map(t,function(t){return(o?n:t[n]).apply(t,e)})},conbo.pluck=function(t,n){return conbo.map(t,conbo.property(n))},conbo.max=function(t,i,r){if(!i&&conbo.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var c=-1/0,s=-1/0;return p(t,function(t,n,e){var o=i?i.call(r,t,n,e):t;s<o&&(c=t,s=o)}),c},conbo.min=function(t,i,r){if(!i&&conbo.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var c=1/0,s=1/0;return p(t,function(t,n,e){var o=i?i.call(r,t,n,e):t;o<s&&(c=t,s=o)}),c},conbo.shuffle=function(t){var n,e=0,o=[];return p(t,function(t){n=conbo.random(e++),o[e-1]=o[n],o[n]=t}),o},conbo.sum=function(t){return i.reduce.call(t||[],function(t,n){return t+n},0)};conbo.toArray=function(t){return t?conbo.isArray(t)?c.call(t):conbo.isIterable(t)?conbo.map(t,conbo.identity):conbo.values(t):[]},conbo.size=function(t){return t?conbo.isIterable(t)?t.length:conbo.keys(t).length:0},conbo.last=function(t,n,e){return t==undefined?undefined:n==undefined||e?t[t.length-1]:c.call(t,Math.max(t.length-n,0))},conbo.rest=function(t,n,e){return c.call(t,n==undefined||e?1:n)},conbo.compact=function(t){return conbo.filter(t,conbo.identity)};var v=function(t,n,e){return n&&conbo.every(t,conbo.isArray)?r.apply(e,t):(p(t,function(t){conbo.isArray(t)||conbo.isArguments(t)?n?o.apply(e,t):v(t,n,e):e.push(t)}),e)};conbo.flatten=function(t,n){return v(t,n,[])},conbo.without=function(t){return conbo.difference(t,c.call(arguments,1))},conbo.partition=function(t,n){var e=[],o=[];return p(t,function(t){(n(t)?e:o).push(t)}),[e,o]},conbo.uniq=function(e,o,t,n){conbo.isFunction(o)&&(n=t,t=o,o=!1);var i=t?conbo.map(e,t,n):e,r=[],c=[];return p(i,function(t,n){(o?n&&c[c.length-1]===t:conbo.contains(c,t))||(c.push(t),r.push(e[n]))}),r},conbo.union=function(){return conbo.uniq(conbo.flatten(arguments,!0))},conbo.intersection=function(t){var e=c.call(arguments,1);return conbo.filter(conbo.uniq(t),function(n){return conbo.every(e,function(t){return conbo.contains(t,n)})})},conbo.difference=function(t){var n=r.apply(i,c.call(arguments,1));return conbo.filter(t,function(t){return!conbo.contains(n,t)})},conbo.object=function(t,n){if(t==undefined)return{};for(var e={},o=0,i=t.length;o<i;o++)n?e[t[o]]=n[o]:e[t[o][0]]=t[o][1];return e},conbo.range=function(t,n,e){arguments.length<=1&&(n=t||0,t=0),e=arguments[2]||1;for(var o=Math.max(Math.ceil((n-t)/e),0),i=0,r=new Array(o);i<o;)r[i++]=t,t+=e;return r};conbo.bindAll=function(n){return(1<arguments.length?conbo.rest(arguments):conbo.filter(conbo.getFunctionNames(n,!0),function(t){return!conbo.isNative(n[t])})).forEach(function(t){n[t]=n[t].bind(n)}),n},conbo.partial=function(i){var r=c.call(arguments,1);return function(){for(var t=0,n=r.slice(),e=0,o=n.length;e<o;e++)n[e]===conbo&&(n[e]=arguments[t++]);for(;t<arguments.length;)n.push(arguments[t++]);return i.apply(this,n)}};var m=!document||-1!=["complete","loaded"].indexOf(document.readyState);conbo.ready=function(t,n){var e=conbo.toArray(arguments),o=function(){document&&document.removeEventListener("DOMContentLoaded",o),m=!0,conbo.defer.apply(conbo,e)};return m?o():document.addEventListener("DOMContentLoaded",o),conbo},conbo.defer=function(t,n){return n&&(t=t.bind(n)),setTimeout.apply(undefined,[t,0].concat(conbo.rest(arguments,2)))};function _(){for(var t;t=g.shift();)t()}var g=[];conbo.callLater=function(t,n){0===_.length&&window.requestAnimationFrame(_);return g.push(function(){t.apply(n,conbo.rest(arguments,2))}),conbo},conbo.once=function(t){var n,e=!1;return function(){return e||(e=!0,n=t.apply(this,arguments),t=undefined),n}},conbo.wrap=function(t,n){return conbo.partial(n,t)},conbo.keys=function(t,n){if(!t)return[];if(n){var e=[];for(var o in t)e.push(o);return e}return f(t)},conbo.functions=function(n,t,e){return conbo.filter(conbo.keys(n,t),function(t){return e?conbo.isFunction(n[t]):conbo.isFunc(n,t)})},conbo.variables=function(t,n){return conbo.difference(conbo.keys(t,n),conbo.functions(t,n))},conbo.getPropertyNames=function(t,n){if(!t)return[];if(n){for(var e=[];e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t););return conbo.uniq(e)}return Object.getOwnPropertyNames(t)},conbo.getFunctionNames=function(n,t,e){return conbo.filter(conbo.getPropertyNames(n,t),function(t){return e?conbo.isFunction(n[t]):conbo.isFunc(n,t)})},conbo.getVariableNames=function(t,n){return conbo.difference(conbo.getPropertyNames(t,n),conbo.getFunctionNames(t,n))},conbo.getPublicVariableNames=function(t,n){return conbo.getVariableNames(t,n).filter(function(t){return 0!=t.indexOf("_")})},conbo.getPropertyDescriptor=function(t,n){if(t)do{var e=Object.getOwnPropertyDescriptor(t,n);if(e)return e}while(t=Object.getPrototypeOf(t))},conbo.values=function(t,n){for(var e=conbo.keys(t,n),o=e.length,i=new Array(o),r=0;r<o;r++)i[r]=t[e[r]];return i},conbo.defineValues=function(e,t){return p(c.call(arguments,1),function(t){if(t)for(var n in t)conbo.cloneProperty(t,n,e)}),e},conbo.defineBindableValues=function(e,t){return p(c.call(arguments,1),function(t){if(t)for(var n in t)delete e[n],__defineBindableProperty(e,n,t[n])}),e},conbo.pick=function(n){var e={},t=r.apply(i,c.call(arguments,1));return p(t,function(t){t in n&&(e[t]=n[t])}),e},conbo.omit=function(t){var n={},e=r.apply(i,c.call(arguments,1));for(var o in t)conbo.contains(e,o)||(n[o]=t[o]);return n},conbo.defineDefaults=function(e){return p(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]===undefined&&conbo.cloneProperty(t,n,e)}),e},conbo.setDefaults=function(e){return p(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]===undefined&&(e[n]=t[n])}),e},conbo.implement=function(t){return conbo.setDefaults.apply(conbo,arguments)},conbo.clone=function(t){return conbo.isObject(t)?conbo.isArray(t)?t.slice():conbo.defineValues({},t):t};var y=function(t,n,e,o){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;var i=l.call(t);if(i!=l.call(n))return!1;switch(i){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0===t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var r=e.length;r--;)if(e[r]==t)return o[r]==n;var c=t.constructor,s=n.constructor;if(c!==s&&!(conbo.isFunction(c)&&c instanceof c&&conbo.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in n)return!1;e.push(t),o.push(n);var a=0,u=!0;if("[object Array]"==i){if(u=(a=t.length)==n.length)for(;a--&&(u=y(t[a],n[a],e,o)););}else{for(var b in t)if(conbo.has(t,b)&&(a++,!(u=conbo.has(n,b)&&y(t[b],n[b],e,o))))break;if(u){for(b in n)if(conbo.has(n,b)&&!a--)break;u=!a}}return e.pop(),o.pop(),u};conbo.isEqual=function(t,n){return y(t,n,[],[])},conbo.isEmpty=function(t){return!t||conbo.isIterable(t)&&0===t.length||/^0\.?0+?$/.test(t)&&!parseFloat(t)||conbo.isObject(t)&&!conbo.keys(t).length},conbo.isIterable=function(t){return t&&t.length===+t.length},conbo.isElement=function(t){return!(!t||1!==t.nodeType)},conbo.isArray=n||function(t){return"[object Array]"==l.call(t)},conbo.isObject=function(t){return t===Object(t)},conbo.isPlainObject=function(t){if(t&&t!==Math){var n=Object.getPrototypeOf(t);return!n||n===Object.prototype}return!1},p(["Arguments","Function","String","Number","Date","RegExp"],function(n){conbo["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),conbo.isArguments(arguments)||(conbo.isArguments=function(t){return!(!t||!conbo.has(t,"callee"))}),"function"!=typeof/./&&(conbo.isFunction=function(t){return"function"==typeof t}),conbo.isFunc=function(t,n){var e=conbo.getPropertyDescriptor(t,n);return e&&"function"==typeof e.value},conbo.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},conbo.isNaN=function(t){return conbo.isNumber(t)&&t!=+t},conbo.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==l.call(t)},conbo.isNull=function(t){return null===t},conbo.isUndefined=function(t){return t===undefined},conbo.isNumeric=function(t){return!isNaN(parseFloat(t))},conbo.has=function(t,n){return e.call(t,n)},conbo.identity=function(t){return t},conbo.property=function(n){return function(t){return t[n]}},conbo.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},conbo.random=function(t,n){return n==undefined&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))};var E=0;conbo.uniqueId=function(t){var n=++E+"";return t?t+n:n},conbo.guid=function(){return window.crypto?([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0;return("x"==t?n:3&n|8).toString(16)})},conbo.isSupported=window.addEventListener&&!!Object.defineProperty&&!!Object.getOwnPropertyDescriptor,conbo.isNode="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0),conbo.noop=function(){},conbo.notImplemented=function(){conbo.warn("Method not implemented")},conbo.toCamelCase=function(t,n){var e=(t||"").toLowerCase().replace(/([\W_])([a-z])/g,function(t){return t[1].toUpperCase()}).replace(/(\W+)/,"");return n?e.charAt(0).toUpperCase()+e.slice(1):e},conbo.toUnderscoreCase=function(t,n){return n=n||"_",(t||"").replace(/\W+/g,n).replace(/([a-z\d])([A-Z])/g,"$1"+n+"$2").toLowerCase()},conbo.toKebabCase=function(t){return conbo.toUnderscoreCase(t,"-")},conbo.toValueString=function(t){return null==t?"":String(t)},conbo.padLeft=function(t,n,e){for(e||0===e||(e=" "),t||0===t||(t=""),n=n||2,e=e.toString().charAt(0),t=t.toString();t.length<n;)t=e+t;return t},conbo.addLeadingZero=function(t,n){return conbo.padLeft(t,n,0)},conbo.formatNumber=function(t,n,e,o){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var i=isFinite(+t)?+t:0,r=isFinite(+n)?Math.abs(n):0,c=conbo.isUndefined(o)?",":o,s=conbo.isUndefined(e)?".":e,a=i.toFixed(r).split(".");return 3<a[0].length&&(a[0]=a[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,c)),(a[1]||"").length<r&&(a[1]=a[1]||"",a[1]+=new Array(r-a[1].length+1).join("0")),a.join(s)},conbo.formatCurrency=function(t,n,e,o,i,r){conbo.isUndefined(o)&&(o=2),n=n||"";var c=conbo.formatNumber(t,o,i,r);return e?c+n:n+c},conbo.encodeEntities=function(t){return conbo.isString(t)||(t=conbo.isNumber(t)?t.toString():""),t.replace(/[\u00A0-\u9999<>\&]/gim,function(t){return"&#"+t.charCodeAt(0)+";"})},conbo.decodeEntities=function(t){return conbo.isString(t)||(t=""),t.replace(/&#(\d+);/g,function(t,n){return String.fromCharCode(n)})},conbo.assign=function(e){return conbo.rest(arguments).forEach(function(t){if(t)for(var n in t)e[n]=t[n]}),e},conbo.setValues=function(t){return __deprecated("conbo.setValues","conbo.assign"),conbo.assign.apply(conbo,arguments)},conbo.isClass=function(t,n){return!!t&&"function"==typeof t&&t.prototype instanceof(n||conbo.Class)},conbo.cloneProperty=function(t,n,e,o){o=o||n;var i=Object.getOwnPropertyDescriptor(t,n);return i?Object.defineProperty(e,o,i):e[o]=t[n],this},conbo.sortOn=function(t,o,i){return i=i||{},conbo.isArray(t)&&o&&t.sort(function(t,n){var e=[t[o],n[o]];return i.descending&&e.reverse(),i.caseInsensitive&&conbo.forEach(e,function(t,n){conbo.isString(t)&&(e[n]=t.toLowerCase())}),e[0]<e[1]?-1:e[0]>e[1]?1:0}),t},conbo.instanceOf=function(t,n){if(!t||conbo.isClass(t)||!n)return!1;try{if(t instanceof n||t.constructor===n)return!0}catch(t){}return!1},conbo.is=function(t,n,e){if(!t||conbo.isClass(t)||!n)return!1;if(conbo.instanceOf(t,n))return!0;if(e=!1!==e,!conbo.isObject(n)||!conbo.keys(n).length)return!1;for(var o in n)if(!(o in t)||e&&!conbo.isUndefined(n[o])&&!conbo.is(t[o],n[o],e))return!1;return!0},conbo.loadCss=function(o,i){return new Promise(function(t,n){var e;"document"in window&&!document.querySelector('[href="'+o+'"]')||n(),(e=document.createElement("link")).rel="stylesheet",e.type="text/css",e.media=i||"all",e.addEventListener("load",t),e.addEventListener("error",n),e.href=o,document.querySelector("head").appendChild(e)})},conbo.loadScript=function(t,n){return conbo.httpRequest({url:t,dataType:"script",scope:n})},conbo.makeBindable=function(n,t){return conbo.isString(t)&&(t=conbo.rest(arguments)),(t=conbo.uniq(t||conbo.getPublicVariableNames(n,!0))).forEach(function(t){__defineBindableProperty(n,t)}),this},conbo.makeAllBindable=function(t,n){return conbo.isString(n)&&(n=conbo.rest(arguments)),n=(n||[]).concat(conbo.getPublicVariableNames(t,!0)),conbo.makeBindable(t,n),this},conbo.isAccessor=function(t,n){return!!t&&(!!t.__lookupGetter__(n)||!!t.__lookupSetter__(n))},conbo.isNative=function(t){var n=Object.prototype.toString,e=Function.prototype.toString,o=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),i=typeof t;return"function"==i?o.test(e.call(t)):t&&"object"==i&&/^\[object .+?Constructor\]$/.test(n.call(t))||!1},conbo.parseTemplate=function(t,o){return t?(o=o||{},t.replace(/{{(.+?)}}|\${(.+?)}/g,function(){try{var t,n,e=(arguments[1]||arguments[2]).trim().split("|");return t=o[(e[0]||"").trim()],n=o[(e[1]||"").trim()],conbo.isFunction(n)||(n=conbo.value),n(t)}catch(t){}})):""},conbo.compileTemplate=function(n,e){return function(t){return conbo.parseTemplate(n,conbo.setDefaults(t||{},e))}},conbo.toQueryString=function(e){return conbo.keys(e).map(function(t){var n=e[t];return n==undefined&&(n=""),t+"="+encodeURIComponent(n)}).join("&")},conbo.getValue=function(t,n,e){if(!1!==e)return t[n];for(var o in t)if(o.toLowerCase()==n.toLowerCase())return t[o]},conbo.jsonify=function(t){if(this!=conbo&&(t=this),conbo.isObject(t)){if(this!=t&&"toJSON"in t)return t.toJSON();if(conbo.isIterable(t))return conbo.map(t,function(t){return conbo.jsonify(t)});var n=conbo.getPublicVariableNames(t);return conbo.pick.apply(conbo,[t].concat(n))}return t},conbo.logEnabled=!0;["log","warn","info","error"].forEach(function(t){conbo[t]=function(){console&&conbo.logEnabled&&console[t].apply(console,arguments)}})}(),function(){conbo.initDom=function(o,t){if(!o)throw new Error("initDom: namespace is undefined");conbo.isString(o)&&(o=conbo(o)),t=t||document.querySelector("html");return conbo.ready(function(){conbo.toArray(t.querySelectorAll(":not(.cb-app)")).forEach(function(t){var n=__ep(t).attributes.cbApp||conbo.toCamelCase(t.tagName,!0),e=o[n];e&&conbo.isClass(e,conbo.Application)&&new e({el:t})})}),this};function i(t,n){for(var e=r.length,o=0;o<e;o++){var i=r[o];if(i[0]==t&&i[1]==n)return o}return-1}var r=[];conbo.observeDom=function(o,t){if(conbo.isString(o)&&(o=conbo(o)),-1==i(o,t)){t=t||document.querySelector("html");var n=new conbo.MutationObserver;return n.observe(t),n.addEventListener(conbo.ConboEvent.ADD,function(t){t.nodes.forEach(function(t){var n=__ep(t);if(!n.hasClass("cb-app")){var e=n.cbAttributes.app||conbo.toCamelCase(t.tagName,!0);e&&o[e]&&new o[e]({el:t})}})}),r.push([o,t,n]),this}},conbo.unobserveDom=function(t,n){conbo.isString(t)&&(t=conbo(t));var e=i(t,n);-1!=e&&(r[e][2].removeEventListener(),r.slice(e,1));return this}}(),document&&!document.querySelector("#cb-style")&&(document.querySelector("head").innerHTML+='<style id="cb-style" type="text/css">\n.cb-hide { visibility:hidden !important; }\n.cb-exclude { display:none !important; }\n.cb-disable { pointer-events:none !important; cursor:default !important; }\nspan { font:inherit; color:inherit; }\n</style>'),conbo.Bindable=function(t,n){conbo.makeBindable(t,[n])},conbo.Inject=function(t,n){delete t[n]&&Object.defineProperty(t,n,{configurable:!0,enumerable:!0,writable:!0})},conbo.Viewable=function(e,o){switch(arguments.length){case 1:-1!==(o=e).indexOf(".")&&conbo.warn('@Viewable("my.custom.namespace") syntax is no longer valid, please use @Viewable("my.custom.namespace", "MyClassName")');case 0:e="default"}return function(t){var n={};return o=o||t.name,Object.defineProperty(t.prototype,"__className",{configurable:!0,enumerable:!1,writable:!0,value:conbo.toKebabCase(o)}),n[o]=t,conbo(e).import(n),t}},conbo.Class=function(){this.declarations.apply(this,arguments),this.preinitialize.apply(this,arguments),this.initialize.apply(this,arguments)},conbo.Class.prototype={declarations:function(){},preinitialize:function(){},initialize:function(){},destroy:function(){},get supro(){return Object.getPrototypeOf(Object.getPrototypeOf(this))},bindAll:function(){return conbo.bindAll.apply(conbo,[this].concat(conbo.toArray(arguments))),this},toString:function(){return"conbo.Class"}},__denumerate(conbo.Class.prototype),conbo.Class.extend=function(t,n){var e=this,o=t&&conbo.has(t,"constructor")?t.constructor:function(){return e.apply(this,arguments)};conbo.defineValues(o,e,n);function i(){this.constructor=o}return i.prototype=e.prototype,o.prototype=new i,t&&conbo.defineValues(o.prototype,t),o},conbo.Class.implement=function(){var t=conbo.defineDefaults.apply(conbo,conbo.union([{}],arguments)),n=conbo.keys(t),e=this.prototype;conbo.defineDefaults(this.prototype,t);var o=conbo.reject(n,function(t){return e[t]!==conbo.notImplemented});if(o.length)throw new Error(e.toString()+" does not implement the following method(s): "+o.join(", "));return this},conbo.ConboClass=conbo.Class.extend({constructor:function(t){var n=conbo.toArray(arguments);n[0]===undefined?n[0]={}:n[0]instanceof conbo.Context&&conbo.is(this,conbo.IInjectable,!1)&&(n[0]=n[0].addTo()),this.declarations.apply(this,n),n[0].context&&(this.context=n[0].context),this instanceof conbo.EventDispatcher&&this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.PREINITIALIZE)),this.preinitialize.apply(this,n),this.__construct.apply(this,n),this instanceof conbo.EventDispatcher&&this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.INITIALIZE)),this.initialize.apply(this,n),conbo.makeAllBindable(this,this.bindable),this.__postInitialize.apply(this,n),this instanceof conbo.EventDispatcher&&this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.INIT_COMPLETE))},toString:function(){return"conbo.ConboClass"},__construct:function(){},__postInitialize:function(){}}),__denumerate(conbo.ConboClass.prototype),conbo.Namespace=conbo.ConboClass.extend({__construct:function(){conbo.ready(function(){document&&!1!==this.autoInit&&this.initDom()},this)},initDom:function(t){return conbo.initDom(this,t),this},observeDom:function(t){return conbo.observeDom(this,t),this},unobserveDom:function(t){return conbo.unobserveDom(this,t),this},import:function(t){return conbo.setDefaults.apply(conbo,[this].concat(conbo.toArray(arguments))),this}}),conbo.IInjectable={get context(){return this.__context},set context(t){t!=this.__context&&(t instanceof conbo.Context&&t.inject(this),this.__context=t,__denumerate(this,"__context"))}},conbo.Event=conbo.Class.extend({constructor:function(t){if(this.preinitialize.apply(this,arguments),conbo.isString(t)?this.type=t:conbo.defineDefaults(this,t),!this.type)throw new Error("Invalid or undefined event type");this.initialize.apply(this,arguments)},initialize:function(t,n){this.data=n},clone:function(){return conbo.clone(this)},preventDefault:function(){return this.defaultPrevented=!0,this},stopPropagation:function(){return this.cancelBubble=!0,this},stopImmediatePropagation:function(){return this.immediatePropagationStopped=!0,this.stopPropagation(),this},toString:function(){return"conbo.Event"}},{ALL:"*"}),__denumerate(conbo.Event.prototype),conbo.DataEvent=conbo.Event.extend(),conbo.ConboEvent=conbo.Event.extend({initialize:function(t,n){conbo.defineDefaults(this,n)},toString:function(){return"conbo.ConboEvent"}},{ALL:"*",CHANGE:"change",ADD:"add",REMOVE:"remove",ROUTE:"route",START:"start",STOP:"stop",TEMPLATE_COMPLETE:"templateComplete",TEMPLATE_ERROR:"templateError",BIND:"bind",UNBIND:"unbind",PREINITIALIZE:"preinitialize",INITIALIZE:"initialize",INIT_COMPLETE:"initComplete",CREATION_COMPLETE:"creationComplete",DETACH:"detach",RESULT:"result",FAULT:"fault"}),conbo.EventDispatcher=conbo.ConboClass.extend({addEventListener:function(t,o,i,r,c){if(!t)throw new Error("Event type undefined");if(!o||!conbo.isFunction(o))throw new Error("Event handler is undefined or not a function");if(i)if(conbo.isPlainObject(i)){var n=i;i=n.scope,r=n.priority||0,c=n.once||!1}else __deprecated("addEventListener(type, handler, scope, priority, once)","addEventListener(type, handler, options)");return conbo.isString(t)&&(t=t.split(" ")),conbo.isArray(t)&&conbo.forEach(t,function(t,n,e){(function(t,n,e,o,i){"*"==t&&(t="all"),this.__queue||__definePrivateProperty(this,"__queue",{}),this.hasEventListener(t,n,e)||(t in this.__queue||(this.__queue[t]=[]),this.__queue[t].push({handler:n,scope:e,once:!!i,priority:~~o}),this.__queue[t].sort(function(t,n){return n.priority-t.priority}))}).call(this,t,o,i,r,c)},this),this},removeEventListener:function(t,o,i){return arguments.length?(conbo.isPlainObject(i)&&(i=i.scope),conbo.isString(t)&&(t=t.split(" ")),conbo.isArray(t)||(t=[undefined]),conbo.forEach(t,function(t,n,e){Zi.call(this,t,o,i)},this)):__definePrivateProperty(this,"__queue",{}),this},hasEventListener:function(t,n,e){return!!(this.__queue&&t in this.__queue&&this.__queue[t].length)&&(conbo.isPlainObject(e)&&(e=e.scope),!!this.__queue[t].filter(function(t){return!(n&&t.handler!=n||e&&t.scope!=e)}).length)},dispatchEvent:function(t){if(!(t instanceof conbo.Event))throw new Error("event parameter is not an instance of conbo.Event");if(!this.__queue||!(t.type in this.__queue)&&!this.__queue.all)return this;t.target||(t.target=this),t.currentTarget=this;var n=conbo.union(this.__queue[t.type]||[],this.__queue.all||[]);if(!n||!n.length)return this;for(var e=0,o=n.length;e<o;++e){var i=n[e];if(i.handler.call(i.scope||this,t),i.once&&Zi.call(this,t.type,i.handler,i.scope),t.immediatePropagationStopped)break}return this},dispatchChange:function(t){return conbo.forEach(arguments,function(t){__dispatchChange(this,t)},this),this},toString:function(){return"conbo.EventDispatcher"}}).implement(conbo.IInjectable),__denumerate(conbo.EventDispatcher.prototype),conbo.EventProxy=conbo.Class.extend({constructor:function(t){this.__obj=t},addEventListener:function(t,n){var e=this.__obj;if(e)switch(!0){case conbo.$&&e instanceof conbo.$:case window.$&&e instanceof window.$:e.on(t,n);break;case e instanceof conbo.EventDispatcher:e.addEventListener(t,n);break;default:t.split(" ").forEach(function(t){e.addEventListener(t,n)})}return this},removeEventListener:function(t,n){var e=this.__obj;if(e)switch(!0){case conbo.$&&e instanceof conbo.$:case window.$&&e instanceof window.$:e.off(t,n);break;case e instanceof conbo.obj:e.removeEventListener(t,n);break;default:t.split(" ").forEach(function(t){e.removeEventListener(t,n)})}return this}}),conbo.HeadlessApplication=conbo.EventDispatcher.extend({contextClass:conbo.Context,__construct:function(t){((t=conbo.clone(t||{})).app=this).context=new this.contextClass(t)},toString:function(){return"conbo.HeadlessApplication"}}).implement(conbo.IInjectable),__denumerate(conbo.HeadlessApplication.prototype),conbo.Context=conbo.EventDispatcher.extend({__construct:function(t){__definePrivateProperties(this,{__commands:t.commands||{},__singletons:t.singletons||{},__app:t.app,__namespace:t.namespace||t.app&&t.app.namespace,__parentContext:t.context}),this.addEventListener(conbo.Event.ALL,this.__allHandler)},get app(){return this.__app},get namespace(){return this.__namespace},get parentContext(){return this.__parentContext},createSubcontext:function(t,n,e){return new(t=t||conbo.Context)({context:this,app:this.app,namespace:this.namespace,commands:e?conbo.clone(this.__commands):undefined,singletons:n?conbo.clone(this.__singletons):undefined})},mapCommand:function(t,n){if(!t)throw new Error("eventType cannot be undefined");if(!n)throw new Error("commandClass for "+t+" cannot be undefined");return this.__commands[t]&&-1!=this.__commands[t].indexOf(n)||(this.__commands[t]=this.__commands[t]||[],this.__commands[t].push(n)),this},unmapCommand:function(t,n){if(!t)throw new Error("eventType cannot be undefined");if(n===undefined)return delete this.__commands[t],this;if(this.__commands[t]){var e=this.__commands[t].indexOf(n);if(-1!=e)return this.__commands[t].splice(e,1),this}},mapSingleton:function(t,n){if(!t)throw new Error("propertyName cannot be undefined");if(n===undefined&&conbo.warn("singletonClass for "+t+" is undefined"),conbo.isClass(n)){var e=conbo.rest(arguments);1==e.length&&n.prototype instanceof conbo.ConboClass&&e.push(this),this.__singletons[t]=new(Function.prototype.bind.apply(n,e))}else this.__singletons[t]=n;return this},unmapSingleton:function(t){if(!t)throw new Error("propertyName cannot be undefined");if(this.__singletons[t])return delete this.__singletons[t],this},mapConstant:function(t,n){return this.mapSingleton(t,n)},unmapConstant:function(t){return this.unmapSingleton(t)},addTo:function(t){return conbo.defineValues(t||{},{context:this})},injectSingletons:function(t){return __deprecated("injectSingletons","inject"),this.inject(t),this},inject:function(n){var t,e=1<arguments.length;for(var o in e&&(t=conbo.rest(arguments)),this.__singletons)(e?-1!=t.indexOf(o):o in n)&&function(t){Object.defineProperty(n,o,{configurable:!0,get:function(){return t}})}(this.__singletons[o]);return n},uninjectSingletons:function(t){return __deprecated("uninjectSingletons","uninject"),this.uninject(t),this},uninject:function(t){var n,e=1<arguments.length;for(var o in e&&(n=conbo.rest(arguments)),this.__singletons)(e?-1!=n.indexOf(o):o in t)&&Object.defineProperty(t,o,{configurable:!0,value:undefined});return t},destroy:function(){return conbo.assign(this,{__commands:undefined,__singletons:undefined,__app:undefined,__namespace:undefined,__parentContext:undefined}),this.removeEventListener(),this},toString:function(){return"conbo.Context"},__allHandler:function(o){var t=conbo.union(this.__commands.all||[],this.__commands[o.type]||[]);t.length&&conbo.forEach(t,function(t,n,e){this.__executeCommand(t,o)},this)},__executeCommand:function(t,n){var e;return e={event:n},new t(this.addTo(e)).execute(),null,this}}),__denumerate(conbo.Context.prototype),conbo.Hash=conbo.EventDispatcher.extend({__construct:function(n){if(n.source){this.addEventListener("change",function(t){n.source[t.property]=t.value},{scope:this})}conbo.assign(this,conbo.setDefaults({},n.source||{},this._defaults)),delete this._defaults},toJSON:conbo.jsonify,toString:function(){return"conbo.Hash"},key:function(t){return conbo.keys(this.toJSON()).sort()[t]},getItem:function(t){return this[t]},setItem:function(t,n){conbo.isAccessor(this,t)||conbo.makeBindable(this,[t]),this[t]=n},removeItem:function(t){t in this&&(delete this[t]||this.setItem(t,undefined))},clear:function(){var t=conbo.keys(this.toJSON());for(var n in t)this.removeItem(n)}}),__denumerate(conbo.Hash.prototype),conbo.LocalHash=conbo.Hash.extend({__construct:function(t){var n="ConboLocalHash",e=(t=conbo.defineDefaults(t,{name:n})).name,o=t.session?window.sessionStorage:window.localStorage;e==n&&conbo.warn("No name specified for "+this.toString()+', using "'+n+'"');this.addEventListener(conbo.ConboEvent.CHANGE,function(t){o.setItem(e,JSON.stringify(this.toJSON()))},{scope:this,priority:1e3}),t.source=e in o?JSON.parse(o.getItem(e)||"{}"):t.source||{},conbo.Hash.prototype.__construct.call(this,t)},flush:function(){return this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CHANGE)),this},toString:function(){return"conbo.LocalHash"}}),__denumerate(conbo.LocalHash.prototype),conbo.List=conbo.EventDispatcher.extend({itemClass:conbo.Hash,__construct:function(t){this.addEventListener(conbo.ConboEvent.ADD,this.__updateArrayAccess,{scope:this,priority:9999}).addEventListener(conbo.ConboEvent.REMOVE,this.__updateArrayAccess,{scope:this,priority:9999});conbo.assign(this,conbo.pick(t,["itemClass"])),this.source=t.source||[]},get source(){return this.__source||(this.__source=[]),this.__source},set source(t){this.__source=[],this.push.apply(this,conbo.toArray(t)),this.dispatchChange("source","length")},get length(){return this.source?this.source.length:0},push:function(t){var n=conbo.toArray(arguments);return n.length&&(this.source.push.apply(this.source,this.__applyItemClass(n)),this.__updateBindings(n),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.ADD)),this.dispatchChange("length")),this.length},pop:function(){if(this.length){var t=this.source.pop();return this.__updateBindings(t,!1),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.REMOVE)),this.dispatchChange("length"),t}},unshift:function(t){return t&&(this.source.unshift.apply(this.source,this.__applyItemClass(conbo.toArray(arguments))),this.__updateBindings(conbo.toArray(arguments)),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.ADD)),this.dispatchChange("length")),this.length},shift:function(){if(this.length){var t=this.source.shift();return this.__updateBindings(t,!1),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.REMOVE)),this.dispatchChange("length"),t}},slice:function(t,n){return t=t||0,conbo.isUndefined(n)&&(n=this.length),new conbo.List({source:this.source.slice(t,n)})},splice:function(t,n){t=t||0,conbo.isUndefined(n)&&(n=this.length);var e=conbo.rest(arguments,2),o=this.source.splice.apply(this.source,[t,n].concat(e));return o.length&&this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.REMOVE)),e.length&&this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.ADD)),(o.length||e.length)&&this.dispatchChange("length"),new conbo.List({source:o})},getItemAt:function(t){return this.source[t]},setItemAt:function(t,n){var e=this.length,o=this.source[t];return this.__updateBindings(o,!1),this.source[t]=n,this.__updateBindings(n),this.length>e&&(this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.ADD)),this.dispatchChange("length")),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CHANGE,{item:n})),o},sort:function(t){return this.source.sort(t),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CHANGE)),this},clone:function(){return new this.constructor(this.source)},toJSON:function(){return conbo.jsonify(this.source)},toArray:function(){return this.source.slice()},toString:function(){return"conbo.List"},key:function(t){return t in this.source?t:-1},getItem:function(t){return this.getItemAt(t)},setItem:function(t,n){this.setItemAt(t,n)},removeItem:function(t){this.splice(t,1)},clear:function(){this.splice()},__updateBindings:function(t,n){var e=!1===n?"removeEventListener":"addEventListener";for(t=(conbo.isArray(t)?t:[t]).slice();t.length;){var o=t.pop();o instanceof conbo.EventDispatcher&&o[e](conbo.ConboEvent.CHANGE,this.dispatchEvent,this)}},__updateArrayAccess:function(t){var n,e=function(n){Object.defineProperty(this,n,{get:function(){return this.getItemAt(n)},set:function(t){this.setItemAt(n,t)},configurable:!0,enumerable:!0})}.bind(this);for(n=0;n<this.length;n++)n in this||e(n);for(;n in this;)delete this[n++]},__applyItemClass:function(t){if(t instanceof Array){for(var n=0;n<t.length;n++)t[n]=this.__applyItemClass(t[n]);return t}return!conbo.isObject(t)||conbo.isClass(t)||t instanceof conbo.Class||(t=new this.itemClass({source:t,context:this.context})),t}}).implement(conbo.IInjectable);var listMethods=["forEach","map","find","findIndex","filter","reject","every","contains","invoke","indexOf","lastIndexOf","max","min","size","rest","last","without","shuffle","isEmpty","sortOn"],oo,po,qo,ro,so;function to(t,n){return this[t]===n||(n&&conbo.isString(n)&&!isNaN(n)&&(n=parseFloat(n),isNaN(n)&&(n="")),this[t]=n),this}function uo(t){return-1!=qo.indexOf(t)}function vo(t,n){conbo.isAccessor(t,n)||conbo.isFunc(t,n)||(t instanceof conbo.EventDispatcher?conbo.makeBindable(t,[n]):conbo.warn('It will not be possible to detect changes to "'+n+'" because "'+t.toString()+'" is not an EventDispatcher'))}function wo(t){return(t||"").trim().replace(/[^\w\._\s]/g,"")}function xo(t,n){return(conbo.isString(n)?wo(n).split("."):n).reduce(function(t,n){return t[n]},t)}listMethods.forEach(function(e){e in conbo&&(conbo.List.prototype[e]=function(){var t=[this.source].concat(conbo.toArray(arguments)),n=conbo[e].apply(conbo,t);return conbo.isArray(n)?new conbo.List({source:n,itemClass:this.itemClass}):n})}),__denumerate(conbo.List.prototype),conbo.LocalList=conbo.List.extend({__construct:function(t){var n="ConboLocalList",e=(t=conbo.defineDefaults(t,this.options,{name:n})).name,o=t.session?window.sessionStorage:window.localStorage;e==n&&conbo.warn("No name specified for "+this.toString()+', using "'+n+'"');this.addEventListener(conbo.ConboEvent.CHANGE,function(t){o.setItem(e,JSON.stringify(this))},{scope:this,priority:1e3}),t.source=e in o?JSON.parse(o.getItem(e)||"[]"):t.source||[],conbo.List.prototype.__construct.call(this,t)},flush:function(){return this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CHANGE)),this},toString:function(){return"conbo.LocalList"}}),__denumerate(conbo.LocalList.prototype),conbo.AttributeBindings=conbo.Class.extend({initialize:function(){this.cbAria.multiple=!0,this.cbClass.multiple=!0,this.cbStyle.multiple=!0,this.cbIncludeIn.raw=!0,this.cbExcludeFrom.raw=!0,this.cbRef.raw=!0,this.cbDetectChange.readOnly=!0},canHandleMultiple:function(t){var n=conbo.toCamelCase(t);return n in this&&this[n].multiple},cbShow:function(t,n){this.cbHide(t,conbo.isEmpty(n))},cbHide:function(t,n){conbo.isEmpty(n)?t.classList.remove("cb-hide"):t.classList.add("cb-hide")},cbInclude:function(t,n){this.cbExclude(t,conbo.isEmpty(n))},cbExclude:function(t,n){conbo.isEmpty(n)?t.classList.remove("cb-exclude"):t.classList.add("cb-exclude")},cbEnabled:function(t,n){t.disabled=!n},cbHtml:function(t,n){t.innerHTML=n},cbText:function(t,n){n=conbo.encodeEntities(n).replace(/\r?\n|\r/g,"<br/>"),t.innerHTML=n},cbClass:function(t,n,e,o){o=o||e.propertyName,conbo.isEmpty(n)?__ep(t).removeClass(o):__ep(t).addClass(o)},cbClasses:function(t,n){t.cbClasses&&__ep(t).removeClass(t.cbClasses),(t.cbClasses=n)&&__ep(t).addClass(n)},cbStyle:function(t,n,e,o){o||conbo.warn('cb-style attributes must specify one or more styles in the format cb-style="myProperty:style-name"'),o=conbo.toCamelCase(o),t.style[o]=n},cbRepeat:function(t,n,e,o){var i,r,c=conbo.toArray(arguments);__ep(t);(e=e||{}).context&&e.context.namespace&&(o=o||conbo.toCamelCase(t.tagName,!0),r=conbo.bindingUtils.getClass(o,e.context.namespace)),r=r||conbo.ItemRenderer,t.cbRepeat||(t.cbRepeat={});var s,a=t.cbRepeat.elements||[];if(t.cbRepeat.placeholder?s=t.cbRepeat.placeholder:(s=document.createComment(conbo.bindingUtils.removeAttributeAfterBinding?"":"cb-repeat"),t.parentNode.insertBefore(s,t),t.parentNode.removeChild(t)),t.cbRepeat.list!=n&&n instanceof conbo.List){var u;t.cbRepeat.list&&t.cbRepeat.list.removeEventListener("change",t.cbRepeat.changeHandler,{scope:this});var b=function(t){"length"===t.property?e.view.dispatchChange(e.propertyName):this.cbRepeat.apply(this,c)};t.cbRepeat.changeHandler=function(t){clearTimeout(u),u=setTimeout(b,0,t)},n.addEventListener("change",t.cbRepeat.changeHandler,{scope:this}),t.cbRepeat.list=n}switch(!0){case n instanceof Array:case n instanceof conbo.List:i=n;break;default:i=conbo.isIterable(n)?conbo.toArray(n):[]}for(;a.length;){var l=a.pop(),h=l.cbView||l.cbGlimpse;h?h.remove():l.parentNode.removeChild(l)}for(var d=0,f=i.length;d<f;++d){var p=i[d],v=t.cloneNode(!0);!conbo.isObject(p)||conbo.isIterable(p)||p instanceof conbo.Hash||(p=new conbo.Hash({source:p})),v.removeAttribute("cb-repeat");var m={data:p,el:v,index:d,isLast:d==i.length-1,list:i,className:"cb-repeat"},_=new r(conbo.assign(m,e));a.push(_.el)}var g=document.createDocumentFragment();a.forEach(function(t){g.appendChild(t)}),s.parentNode.insertBefore(g,s),t.cbRepeat.elements=a,t.cbRepeat.placeholder=s},cbDataset:function(t,n){conbo.isObject(n)&&conbo.assign(t.dataset,n)},cbData:function(t,n){t.cbGlimpse?t.cbGlimpse.data=n:this.cbDataset(t,n)},cbIncludeIn:function(t,n,e){var o=e.view,i=n.split(" "),r=function(){this.cbInclude(t,-1!=i.indexOf(o.currentState))}.bind(this);o.addEventListener("change:currentState",r,{scope:this}),r.call(this)},cbExcludeFrom:function(t,n,e){function o(){this.cbExclude(t,-1!=r.indexOf(i.currentState))}var i=e.view,r=n.split(" ");i.addEventListener("change:currentState",o,{scope:this}),o.call(this)},cbRemove:function(t,n){conbo.isEmpty(n)||t.parentNode.removeChild(t)},cbKeep:function(t,n){this.cbRemove(t,!n)},cbOnbind:function(t,n){t.addEventListener("bind",n)},cbJshref:function(n){"A"==n.tagName&&(n.onclick=function(t){return window.location=n.href,t.preventDefault(),!1})},cbDetectChange:function(n){function e(){i.removeClass("cb-changed cb-unchanged").addClass(t.querySelector(".cb-changed")?"cb-changed":"cb-unchanged")}var o=__ep(n),t=o.closest("form"),i=__ep(t),r=n.value||n.innerHTML;o.addEventListener("change input",function(){var t=(n.value||n.innerHTML)!=r;o.removeClass("cb-changed cb-unchanged").addClass(t?"cb-changed":"cb-unchanged"),e()}).addClass("cb-unchanged"),e()},cbValidate:function(r,n){var c;switch(!0){case conbo.isFunction(n):c=n;break;case conbo.isString(n):n=new RegExp(n);case conbo.isRegExp(n):c=function(t){return n.test(t)}}if(conbo.isFunction(c)){var s=__ep(r),a=s.closest("form"),u=function(n){return function(t){return t.split(/\s+/).filter(function(t){return n.test(t)}).join(" ")}};s.addEventListener("change input blur",function(){var t=r.value||r.innerHTML,n=c(t),e=!0===n,o=[];if(o.push(e?"cb-valid":"cb-invalid"),conbo.isString(n)&&o.push("cb-invalid-"+n),s.removeClass("cb-valid cb-invalid").removeClass(u(/^cb-invalid-/)).addClass(o.join(" ")),a){var i=__ep(a);i.removeClass("cb-valid cb-invalid").removeClass(u(/^cb-invalid-/)),(e=e&&!a.querySelector(".cb-invalid"))&&conbo.toArray(a.querySelectorAll("[required]")).forEach(function(t){if(!String(t.value||t.innerHTML).trim())return e=!1}),i.addClass(e?"cb-valid":"cb-invalid")}})}else conbo.warn(n+" cannot be used with cb-validate")},cbRestrict:function(t,i){t.cbRestrict&&t.removeEventListener("keypress",t.cbRestrict),t.cbRestrict=function(t){if(!t.ctrlKey){var n=t.keyCode||t.which,e=t.key||String.fromCharCode(n),o=i;conbo.isRegExp(o)||(o=new RegExp("["+o+"]","g")),e.match(o)||t.preventDefault()}},t.addEventListener("keypress",t.cbRestrict)},cbMaxChars:function(n,e){n.cbMaxChars&&n.removeEventListener("keypress",n.cbMaxChars),n.cbMaxChars=function(t){(n.value||n.innerHTML).length>=e&&t.preventDefault()},n.addEventListener("keypress",n.cbMaxChars)},cbAria:function(t,n,e,o){o||conbo.warn('cb-aria attributes must specify one or more name in the format cb-class="myProperty:aria-name"'),t.setAttribute("aria-"+o,n)},cbOnlongpress:function(t,n){function e(t){i&&(clearTimeout(i),i=0)}function o(t){if("click"!==t.type||0===t.button)return r=!1,i=setTimeout(function(){r=!0,n(new MouseEvent("longpress",t))},500),!1}var i,r=!1;t.addEventListener("mousedown",o),t.addEventListener("touchstart",o),t.addEventListener("click",function(t){if(i&&(clearTimeout(i),i=0),r)return!1}),t.addEventListener("mouseout",e),t.addEventListener("touchend",e),t.addEventListener("touchleave",e),t.addEventListener("touchcancel",e)},cbRef:function(t,n,e){e.view[n]=t}}),oo=new conbo.AttributeBindings,po={},qo=["cb-app","cb-view","cb-glimpse","cb-content"],ro=["cb","data","aria"],so=["cb"],conbo.BindingUtils=conbo.Class.extend({removeAttributeAfterBinding:!0,bindElement:function(n,e,o,i){var t=n instanceof conbo.EventDispatcher;if(!o)throw new Error("el is undefined");vo(n,e);var r,c,s=[];i=i||this.defaultParseFunction;var a=new conbo.EventProxy(o),u=o.tagName;switch(u){case"INPUT":case"SELECT":case"TEXTAREA":switch((o.type||u).toLowerCase()){case"checkbox":return o.checked=!!n[e],t&&(r="change:"+e,c=function(t){o.checked=!!t.value},n.addEventListener(r,c),s.push([n,r,c])),r="input change",c=function(t){to.call(n,e,o.checked)},a.addEventListener(r,c),void s.push([a,r,c]);case"radio":o.value==n[e]&&(o.checked=!0),t&&(r="change:"+e,c=function(t){null==t.value&&(t.value=""),o.value==t.value&&(o.checked=!0)},n.addEventListener(r,c),s.push([n,r,c]));break;default:o.value=conbo.toValueString(n[e]),t&&(r="change:"+e,c=function(t){null==t.value&&(t.value=""),o.value!=t.value&&(o.value=conbo.toValueString(t.value))},n.addEventListener(r,c),s.push([n,r,c]))}r="input change",c=function(t){to.call(n,e,o.value===undefined?o.innerHTML:o.value)},a.addEventListener(r,c),s.push([a,r,c]);break;case"CB-TEXT":var b=document.createTextNode(i(n[e]));o.parentNode.insertBefore(b,o),o.parentNode.removeChild(o),t&&(r="change:"+e,c=function(t){b.data=i(t.value)},n.addEventListener(r,c),s.push([n,r,c]));break;default:o.innerHTML=i(n[e]),t&&(r="change:"+e,c=function(t){var n=i(t.value);o.innerHTML=n},n.addEventListener(r,c),s.push([n,r,c]))}return s},unbindElement:function(t,n,e){return this},bindAttribute:function(n,e,o,t,i,r){var c=[];if(uo(t))return c;if(!o)throw new Error("element is undefined");var s=t.split("-");if(!(1<s.length))return c;if("cb-bind"==t)return c=this.bindElement(n,e,o,i),this.removeAttributeAfterBinding&&o.removeAttribute(t),c;vo(n,e);var a,u,b=conbo.toArray(arguments).slice(5),l=conbo.toCamelCase(t),h="cb"==s[0],d=h&&l in oo,f=!d&&l in po,p=h&&2==s.length&&s[1]in o,v=oo;switch(i=i||this.defaultParseFunction,!0){case f:v=po;case d:if(!(n instanceof conbo.EventDispatcher))return conbo.warn("Source is not EventDispatcher"),this;var m=v[l];m.raw?m.apply(v,[o,e].concat(b)):(u=function(t){m.apply(v,[o,i(n[e])].concat(b))},a="change:"+e,n.addEventListener(a,u),u(),c.push([n,a,u]));break;case p:var _=s[1];switch(!0){case 0!==_.indexOf("on")&&conbo.isFunction(o[_]):conbo.warn(t+" is not a recognised attribute, did you mean cb-on"+_+"?");break;case 0===_.indexOf("on"):if(!conbo.isFunction(n[e]))return conbo.warn(e+" is not a function and cannot be bound to DOM events"),this;a=_.substr(2),u=n[e],o.addEventListener(a,u),c.push([o,a,u]);break;default:if(!(n instanceof conbo.EventDispatcher))return conbo.warn("Source is not EventDispatcher"),this;u=function(){var t;t=i(n[e]),t=conbo.isBoolean(o[_])?!!t:t,o[_]=t},a="change:"+e,n.addEventListener(a,u),u(),c.push([n,a,u]);var g=new conbo.EventProxy(o);u=function(){to.call(n,e,o[_])},a="input change",g.addEventListener(a,u),c.push([g,a,u])}break;default:conbo.warn(t+" is not recognised or does not exist on specified element")}return"cb-repeat"!==t&&this.removeAttributeAfterBinding&&o.removeAttribute(t),c},applyAttribute:function(t,n){if(this.attributeExists(n)){var e=conbo.toCamelCase(n),o="cb"==n.split("-")[0]?oo:po,i=o[e];i.readOnly?i.call(o,t):conbo.warn(n+" attribute cannot be used without a value")}else conbo.warn(n+" attribute does not exist");return this},attributeExists:function(t){var n=conbo.toCamelCase(t);return n in oo||n in po},bindView:function(g){if(!g)throw new Error("view is undefined");g.__bindings&&this.unbindView(g);var y={view:g},E=[],w=this;g.subcontext&&g.subcontext.addTo(y);var t=g.context&&g.context.namespace;t&&this.applyViews(g,t,"glimpse").applyViews(g,t,"view");var n=[];g.querySelectorAll("[cb-repeat]").forEach(function(t){n=n.concat(conbo.toArray(t.querySelectorAll("*")))});var e=conbo.difference(g.querySelectorAll("*").concat([g.el]),n);return e.sort(function(t,n){var e=__ep(t).attributes.hasOwnProperty("cbRepeat"),o=__ep(n).attributes.hasOwnProperty("cbRepeat");return e&&o?0:e&&!o?-1:!e&&o?1:void 0}),e.forEach(function(m,t){var _=__ep(m).attributes;if(conbo.keys(_).length){var n=conbo.keys(_);-1!=n.indexOf("cbRepeat")&&(n=["cbRepeat"]),n.forEach(function(t){var n=conbo.toUnderscoreCase(t,"-"),e=n.split("-");if(!(e.length<2||-1==so.indexOf(e[0])||uo(n))){var o=_[t].split(",");oo.canHandleMultiple(n)||(o=[o[0]]);for(var i=o.length,r=0;r<i;r++){var c,s=o[r]||"";if(!s){w.applyAttribute(m,n);break}var a,u=s.split("|"),b=u[0].split(":"),l=b[0],h=b[1],d=wo(l).split("."),f=d.pop();try{c=u[1]?xo(g,u[1]):undefined,c=conbo.isFunction(c)?c:undefined}catch(t){}try{a=d.length?xo(g,d):g}catch(t){}if(!a)return void conbo.warn(l+" is not defined in this View");var p=conbo.defineValues({propertyName:f},y),v=[a,f,m,n,c,p,h];E=E.concat(w.bindAttribute.apply(w,v))}conbo.defer(function(){var t;(t=document.createEvent("CustomEvent")).initCustomEvent("bind",!1,!1,{}),m.dispatchEvent(t)})}})}}),__definePrivateProperty(g,"__bindings",E),this},unbindView:function(t){if(!t)throw new Error("view is undefined");if(!t.__bindings||!t.__bindings.length)return this;for(var n=t.__bindings;n.length;){var e=n.pop();try{e[0].removeEventListener(e[1],e[2])}catch(t){}}return delete t.__bindings,this},applyViews:function(i,t,n){if(-1==["view","glimpse"].indexOf(n=n||"view"))throw new Error(n+" is not a valid type parameter for applyView");conbo[n.charAt(0).toUpperCase()+n.slice(1)];var e=conbo.isElement(i)?i:i.el;for(var o in t){var r=this.getClass(o,t),c=conbo.isClass(r,conbo.View),s=conbo.isClass(r,conbo.Glimpse)&&!c;if("glimpse"==n&&s||"view"==n&&c){var a=conbo.toKebabCase(o);conbo.toArray(e.querySelectorAll(a+":not(.cb-"+n+"):not([cb-repeat]), [cb-"+n+"="+o+"]:not(.cb-"+n+"):not([cb-repeat])")).forEach(function(t){var n=__ep(t);if(!n.closest("[cb-repeat]")){var e=n.closest(".cb-view"),o=e?e.cbView.subcontext:i.subcontext;new r({el:t,context:o})}})}}return this},bindProperty:function(t,n,e,o,i){if(!(t instanceof conbo.EventDispatcher))throw new Error(n+" source is not EventDispatcher");return o=o||n,vo(t,n),t.addEventListener("change:"+n,function(t){e instanceof conbo.EventDispatcher?to.call(e,o,t.value):e[o]=t.value}),i&&e instanceof conbo.EventDispatcher&&this.bindProperty(e,o,t,n),this},bindSetter:function(t,n,e){if(!(t instanceof conbo.EventDispatcher))throw new Error("Source is not EventDispatcher");if(!conbo.isFunction(e)){if(!(e&&n in e))throw new Error("Invalid setter function");e=e[n]}return vo(t,n),t.addEventListener("change:"+n,function(t){e(t.value)}),this},defaultParseFunction:function(t){return void 0===t?"":t},getClass:function(t,n){if(t&&n)try{var e=n[t];if(conbo.isClass(e))return e}catch(t){}},registerAttribute:function(t,n,e,o){if(!conbo.isString(t)||!conbo.isFunction(n))return conbo.warn("registerAttribute: both 'name' and 'handler' parameters are required"),this;var i=conbo.toUnderscoreCase(t).split("_");if(i.length<2)return conbo.warn("registerAttribute: "+t+" does not include a namespace, e.g. "+conbo.toCamelCase("my-"+t)),this;var r=i[0];return-1!=ro.indexOf(r)?conbo.warn("registerAttribute: custom attributes cannot to use the "+r+" namespace"):(so=conbo.union(so,[r]),conbo.assign(n,{readOnly:!!e,raw:!!o}),po[t]=n),this},registerAttributes:function(t,n){for(var e in t)this.addAttribute(e,t[e],n);return this},parseTemplate:function(t){return(t||"").replace(/{{(.+?)}}/g,function(t,n){return'<cb-text cb-bind="'+n.trim()+'"></cb-text>'})},toString:function(){return"conbo.BindingUtils"}}),conbo.bindingUtils=new conbo.BindingUtils,conbo.MutationObserver=conbo.EventDispatcher.extend({initialize:function(){this.bindAll()},observe:function(t){if(this.disconnect(),t){var n=window.MutationObserver||window.WebKitMutationObserver;if(n){var e=new n(function(t,n){var e=t[0].addedNodes,o=t[0].removedNodes;e.length&&this.__addHandler(conbo.toArray(e)),t[0].removedNodes.length&&this.__removeHandler(conbo.toArray(o))}.bind(this));e.observe(t,{childList:!0,subtree:!0}),this.__mo=e}else t.addEventListener("DOMNodeInserted",this.__addHandler),t.addEventListener("DOMNodeRemoved",this.__removeHandler),this.__el=t;return this}},disconnect:function(){var t=this.__mo,n=this.__el;return t&&t.disconnect(),n&&(n.removeEventListener("DOMNodeInserted",this.__addHandler),n.removeEventListener("DOMNodeRemoved",this.__removeHandler)),this},__addHandler:function(t){var n=conbo.isArray(t)?t:[t.target];this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.ADD,{nodes:n}))},__removeHandler:function(t){var n=conbo.isArray(t)?t:[t.target];this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.REMOVE,{nodes:n}))}}),conbo.ElementProxy=conbo.EventProxy.extend({getAttributes:function(){var t=this.__obj,n={};return t&&conbo.forEach(t.attributes,function(t){n[conbo.toCamelCase(t.name)]=t.value}),n},setAttributes:function(t){var e=this.__obj;return e&&t&&conbo.forEach(t,function(t,n){e.setAttribute(conbo.toKebabCase(n),t)}),this},get attributes(){return this.getAttributes()},set attributes(t){return this.setAttributes(t)},get cbAttributes(){var t=this.__obj,n={};return t&&conbo.forEach(t.attributes,function(t){0===t.name.indexOf("cb-")&&(n[conbo.toCamelCase(t.name.substr(3))]=t.value)}),n},addClass:function(t){var n=this.__obj;if(n instanceof Element&&t)for(var e=t.trim().split(" ");t=e.pop();)n.classList.add(t);return this},removeClass:function(t){var n=this.__obj;if(n instanceof Element&&t){conbo.isFunction(t)&&(t=t(n.className));for(var e=t.trim().split(" ");t=e.pop();)n.classList.remove(t)}return this},hasClass:function(t){var n=this.__obj;return!!(n instanceof Element&&t)&&n.classList.contains(t)},closest:function(t){var n,e,o=this.__obj;if(o)for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(t){return"function"==typeof document.body[t]&&(n=t,!0)});o;){if((e=o.parentElement)&&e[n](t))return e;o=e}}}),conbo.IDataRenderer={data:undefined,index:-1,isLast:!1,list:undefined},conbo.Glimpse=conbo.EventDispatcher.extend({__construct:function(t){this.__setEl(t.el||document.createElement(this.tagName)),this.template&&(this.el.innerHTML=this.template)},get tagName(){return this.__tagName||"div"},set tagName(t){__definePrivateProperty(this,"__tagName",t)},get el(){return this.__el},toString:function(){return"conbo.Glimpse"},__setEl:function(t){var n=conbo.assign({},this.attributes);for(var e in this.id&&!t.id&&(n.id=this.id),t.classList.add("cb-glimpse"),t.classList.add(this.__className),t.cbGlimpse=this,n)t.setAttribute(conbo.toKebabCase(e),n[e]);return this.style&&(t.style=conbo.assign(t.style,this.style)),__definePrivateProperty(this,"__el",t),this}}),__denumerate(conbo.Glimpse.prototype);var View__templateCache={};return conbo.View=conbo.Glimpse.extend({__construct:function(t){(t=conbo.clone(t)||{}).className&&this.className&&(t.className+=" "+this.className);var n=conbo.union(["attributes","className","data","id","style","tagName","template","templateUrl","templateCacheEnabled","autoInitTemplate"],conbo.intersection(conbo.variables(this,!0),conbo.variables(t)));conbo.assign(this,conbo.pick(t,n)),conbo.makeBindable(this),this.context=t.context,this.__setEl(t.el||document.createElement(this.tagName))},__postInitialize:function(t){__definePrivateProperty(this,"__initialized",!0),this.__content=this.el.innerHTML,!1!==this.autoInitTemplate&&this.initTemplate()},get el(){return this.__el},get initialized(){return!!this.__initialized},get parent(){if(this.initialized)return this.__getParent(".cb-view")},get parentApp(){if(this.initialized)return this.__getParent(".cb-app")},get hasTemplate(){return!(!this.template&&!this.templateUrl)},get content(){return this.querySelector("[cb-content]")},get hasContent(){return!!this.content},get body(){return this.content||this.el},get subcontext(){return this.__subcontext||this.context},set subcontext(t){this.__subcontext=t},get currentState(){return this.__currentState||""},set currentState(t){this.el&&(this.currentState&&this.el.classList.remove("cb-state-"+this.currentState),t&&this.el.classList.add("cb-state-"+t)),this.__currentState=t,this.dispatchChange("currentState")},templateComplete:function(){},creationComplete:function(){},querySelector:function(t,n){return this.querySelectorAll(t,n)[0]},querySelectorAll:function(e,t){if(this.el){var o=conbo.toArray(this.el.querySelectorAll(e));if(!t){var n=this.el.querySelectorAll(".cb-view, [cb-view], [cb-app]");conbo.forEach(n,function(t){var n=conbo.toArray(t.querySelectorAll(e));o=conbo.difference(o,n.concat(t))})}return o}return[]},detach:function(){try{var t=this.el;t.parentNode&&(t.parentNode.removeChild(t),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.DETACH)))}catch(t){}return this},remove:function(){this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.REMOVE)),this.data&&(this.data=undefined),this.subcontext&&this.subcontext!=this.context&&(this.subcontext.destroy(),this.subcontext=undefined),this.context&&(this.context.uninject(this),this.context.removeEventListener(undefined,undefined,this),this.context=undefined);for(var t=this.querySelectorAll(".cb-view",!0);t.length;){var n=t.pop();try{n.cbView.remove()}catch(t){}}return this.unbindView().detach().removeEventListener().destroy(),this},appendView:function(t){if(1<arguments.length)return conbo.forEach(arguments,function(t,n,e){this.appendView(t)},this),this;if("function"==typeof t&&(t=new t(this.context)),!(t instanceof conbo.View))throw new Error("Parameter must be conbo.View class or instance of it");return this.body.appendChild(t.el),this},prependView:function(t){if(1<arguments.length)return conbo.forEach(arguments,function(t,n,e){this.prependView(t)},this),this;if("function"==typeof t&&(t=new t(this.context)),!(t instanceof conbo.View))throw new Error("Parameter must be conbo.View class or instance of it");var n=this.body.firstChild;return n?this.body.insertBefore(t.el,n):this.appendView(t),this},bindView:function(){return conbo.bindingUtils.bindView(this),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.BIND)),this},unbindView:function(){return conbo.bindingUtils.unbindView(this),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.UNBIND)),this},initTemplate:function(){var t=this.template;if(this.templateUrl)this.loadTemplate();else{conbo.isFunction(t)&&(t=t(this));var n=this.el;conbo.isString(t)?n.innerHTML=this.__parseTemplate(t):/{{(.+?)}}/.test(n.textContent)&&(n.innerHTML=this.__parseTemplate(n.innerHTML)),this.__initView()}return this},loadTemplate:function(e){e=e||this.templateUrl;var o=this.body;if(this.unbindView(),!1!==this.templateCacheEnabled&&View__templateCache[e])return o.innerHTML=View__templateCache[e],this.__initView(),this;return conbo.httpRequest({url:e,dataType:"text"}).then(function(t){var n=this.__parseTemplate(t.result);!1!==this.templateCacheEnabled&&(View__templateCache[e]=n),o.innerHTML=n,this.__initView()}.bind(this),function(t){o.innerHTML="",this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.TEMPLATE_ERROR)),this.__initView()}.bind(this)),this},toString:function(){return"conbo.View"},__setEl:function(t){if(conbo.isElement(t)){var n=conbo.assign({},this.attributes);this.id&&!t.id&&(n.id=this.id),this.style&&conbo.assign(t.style,this.style);var e=__ep(t);return t.cbView=this,e.addClass("cb-view").addClass(this.className).addClass(this.__className).setAttributes(n),this.currentState&&e.addClass("cb-state-"+this.currentState),__definePrivateProperty(this,"__el",t),this}conbo.error("Invalid element passed to View")},__initView:function(){return this.hasTemplate&&this.hasContent&&(this.content.innerHTML=this.__content),delete this.__content,this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.TEMPLATE_COMPLETE)),this.templateComplete(),this.bindView(),conbo.defer(function(){this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CREATION_COMPLETE)),this.creationComplete()},this),this},__getParent:function(t){var n=__ep(this.el).closest(t);if(n)return n.cbView},__parseTemplate:function(t){return conbo.bindingUtils.parseTemplate(t)}}),__denumerate(conbo.View.prototype),conbo.ItemRenderer=conbo.View.extend().implement(conbo.IDataRenderer),conbo.Application=conbo.View.extend({__construct:function(t){t=conbo.clone(t)||{},this.namespace instanceof conbo.Namespace||(this.namespace=conbo()),t.app=this,t.context=new this.contextClass(t),this.addEventListener(conbo.ConboEvent.CREATION_COMPLETE,this.__creationComplete,{scope:this,once:!0}),conbo.View.prototype.__construct.call(this,t)},__creationComplete:function(t){this.initialView&&this.appendView(this.initialView)},get initialView(){if("function"==typeof this.__initialView){var t=conbo.assign({},this.initialViewOptions,{context:this.context});this.initialView=new this.__initialView(t)}return this.__initialView},set initialView(t){this.__initialView=t},get initialViewOptions(){return this.__initialViewOptions||{}},set initialViewOptions(t){this.__initialViewOptions=t},get contextClass(){return this.__contextClass||conbo.Context},set contextClass(t){this.__contextClass=t},get observeEnabled(){return!!this.__mo},set observeEnabled(t){var n;if(t!=this.observeEnabled)return t?((n=new conbo.MutationObserver).observe(this.el),n.addEventListener(conbo.ConboEvent.ADD,function(t){conbo.bindingUtils.applyViews(this,this.namespace).applyViews(this,this.namespace,"glimpse")},{scope:this}),this.__mo=n):this.__mo&&((n=this.__mo).removeEventListener(),n.disconnect(),delete this.__mo),this.dispatchChange("observeEnabled"),this},toString:function(){return"conbo.Application"},__setEl:function(t){return conbo.View.prototype.__setEl.call(this,t),__ep(this.el).addClass("cb-app"),this}}),__denumerate(conbo.Application.prototype),conbo.Command=conbo.ConboClass.extend({__construct:function(t){this.event=t.event||{}},execute:function(){},toString:function(){return"conbo.Command"}}).implement(conbo.IInjectable),__denumerate(conbo.Command.prototype),conbo.httpRequest=function(options){if(conbo.isString(options)&&(options={url:options,data:arguments[1],method:arguments[2]}),!conbo.isObject(options)||!options.url)throw new Error("httpRequest called without specifying a URL");return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest,aborted,url=options.url,method=(options.method||options.type||"GET").toUpperCase(),data=options.data||options.body,headers=options.headers||{},timeoutTimer,contentType=conbo.getValue(headers,"Content-Type",!1)||options.contentType||conbo.CONTENT_TYPE_JSON,dataType=options.dataType||conbo.DATA_TYPE_JSON,decodeFunction=options.decodeFunction||options.dataFilter,getXml=function(){if("document"===xhr.responseType)return xhr.responseXML;var t=xhr.responseXML&&"parsererror"===xhr.responseXML.documentElement.nodeName;return""!==xhr.responseType||t?null:xhr.responseXML},getResult=function(){var result=xhr.response||xhr.responseText||getXml(xhr);if(conbo.isFunction(decodeFunction))result=decodeFunction(result);else switch(dataType){case conbo.DATA_TYPE_SCRIPT:(function(){eval(result)}).call(options.scope||window);break;case conbo.DATA_TYPE_JSON:try{result=JSON.parse(result)}catch(t){result=undefined}break;case conbo.DATA_TYPE_TEXT:}var resultClass=options.resultClass;if(!resultClass&&options.makeObjectsBindable)switch(!0){case conbo.isArray(result):resultClass=conbo.List;break;case conbo.isObject(result):resultClass=conbo.Hash}return resultClass&&(result=new resultClass({source:result})),result},getResponseHeaders=function(){var t=xhr.getAllResponseHeaders(),o={};return t.split("\r\n").forEach(function(t){var n=t.indexOf(":"),e=t.substr(0,n).trim();o[e]=t.substr(n+1).trim()}),o},errorHandler=function(){clearTimeout(timeoutTimer);var t={fault:getResult(),responseHeaders:getResponseHeaders(),status:xhr.status,method:method,url:url,xhr:xhr};reject(new conbo.ConboEvent(conbo.ConboEvent.FAULT,t))},loadHandler=function(){if(!aborted){clearTimeout(timeoutTimer);var t=1223===xhr.status?204:xhr.status;if(0===t||400<=t)errorHandler();else{var n={result:getResult(),responseHeaders:getResponseHeaders(),status:t,method:method,url:url,xhr:xhr};resolve(new conbo.ConboEvent(conbo.ConboEvent.RESULT,n))}}},readyStateChangeHandler=function(){4===xhr.readyState&&conbo.defer(loadHandler)};if("GET"!==method&&"HEAD"!==method)conbo.getValue(headers,"Content-Type",!1)||(headers["Content-Type"]=contentType),contentType==conbo.CONTENT_TYPE_JSON&&conbo.isObject(data)&&(data=JSON.stringify(data));else if("GET"===method&&conbo.isObject(data)){var query=conbo.toQueryString(data);query&&(url+="?"+query),data=undefined}for(var key in"onload"in xhr?xhr.onload=loadHandler:xhr.onreadystatechange=readyStateChangeHandler,xhr.onerror=errorHandler,xhr.onprogress=function(){},xhr.onabort=function(){aborted=!0},xhr.ontimeout=errorHandler,xhr.open(method,url,!0,options.username,options.password),xhr.withCredentials=!!options.withCredentials,0<options.timeout&&(timeoutTimer=setTimeout(function(){aborted||(aborted=!0,xhr.abort("timeout"),errorHandler())},options.timeout)),headers)headers.hasOwnProperty(key)&&xhr.setRequestHeader(key,headers[key]);"responseType"in options&&(xhr.responseType=options.responseType),"function"==typeof options.beforeSend&&options.beforeSend(xhr),xhr.send(data||null)})},conbo.HttpService=conbo.EventDispatcher.extend({__construct:function(t){t=conbo.setDefaults(t,{contentType:conbo.CONTENT_TYPE_JSON}),conbo.assign(this,conbo.setDefaults(conbo.pick(t,"rootUrl","contentType","dataType","headers","encodeFunction","decodeFunction","resultClass","makeObjectsBindable"),{dataType:"json"}));["POST","GET","PUT","PATCH","DELETE"].forEach(function(i){this[i.toLowerCase()]=function(t,n,e,o){return this.call(t,n,i,o)}},this),conbo.EventDispatcher.prototype.__construct.apply(this,arguments)},get rootUrl(){return this._rootUrl||""},set rootUrl(t){(t=String(t))&&"/"!=t.slice(-1)&&(t+="/"),this._rootUrl=t},call:function(t,o,i,r){var c=this;return o=conbo.clone(o||{}),t=this.parseUrl(t,o),o=this.encodeFunction(o,i),new Promise(function(n,e){conbo.httpRequest({data:o,type:i||"GET",headers:c.headers,url:(c.rootUrl+t).replace(/\/$/,""),contentType:c.contentType||conbo.CONTENT_TYPE_JSON,dataType:c.dataType,dataFilter:c.decodeFunction,resultClass:r||c.resultClass,makeObjectsBindable:c.makeObjectsBindable}).then(function(t){c.dispatchEvent(t),n(t)}).catch(function(t){c.dispatchEvent(t),e(t)})})},addCommand:function(n,e,o){return conbo.isObject(n)&&(e=n.method,o=n.resultClass,n=n.command),this[conbo.toCamelCase(n)]=function(t){return this.call(n,t,e,o)},this},addCommands:function(t){return conbo.isArray(t)&&t.forEach(function(t){this.addCommand(t)},this),this},encodeFunction:function(t,n){return t},parseUrl:function(t,e){var o=t,n=o.match(/:\b\w+\b/g);return n&&n.forEach(function(t){if(!((t=t.substr(1))in e))throw new Error('Property "'+t+'" required but not found in data')}),conbo.keys(e).forEach(function(t){var n=new RegExp(":\\b"+t+"\\b","g");n.test(o)&&(o=o.replace(n,e[t]),delete e[t])}),o},toString:function(){return"conbo.HttpService"}}).implement(conbo.IInjectable),conbo.ISyncable={load:conbo.notImplemented,save:conbo.notImplemented,destroy:conbo.notImplemented},conbo.RemoteHash=conbo.Hash.extend({__construct:function(t){(t=conbo.defineDefaults(t,this.options)).context&&(this.context=t.context),this.preinitialize(t),this._httpService=new conbo.HttpService(t),this._command=t.command;this._httpService.addEventListener(conbo.ConboEvent.RESULT,function(t){conbo.makeBindable(this,conbo.variables(t.result)),conbo.assign(this,t.result),this.dispatchEvent(t)},{scope:this}).addEventListener(conbo.ConboEvent.FAULT,this.dispatchEvent,{scope:this}),__denumerate(this),conbo.Hash.prototype.__construct.apply(this,arguments)},load:function(t){return t=arguments.length?t:this.toJSON(),this._httpService.call(this._command,t,"GET"),this},save:function(){return this._httpService.call(this._command,this.toJSON(),"POST"),this},destroy:function(){return this._httpService.call(this._command,this.toJSON(),"DELETE"),this},toString:function(){return"conbo.RemoteHash"}}).implement(conbo.ISyncable),__denumerate(conbo.HttpService.prototype),conbo.RemoteList=conbo.List.extend({__construct:function(t){t=conbo.defineDefaults(t,this.options),this.context=t.context,this._httpService=new conbo.HttpService(t),this._command=t.command;this._httpService.addEventListener(conbo.ConboEvent.RESULT,function(t){this.source=t.result,this.dispatchEvent(t)},{scope:this}).addEventListener(conbo.ConboEvent.FAULT,this.dispatchEvent,{scope:this}),__denumerate(this),conbo.List.prototype.__construct.apply(this,arguments)},load:function(){return this._httpService.call(this._command,this.toJSON(),"GET"),this},save:function(){return this._httpService.call(this._command,this.toJSON(),"POST"),this},destroy:function(){return this},toString:function(){return"conbo.RemoteList"}}).implement(conbo.ISyncable,conbo.IPreinitialize),__denumerate(conbo.HttpService.prototype),conbo.History=conbo.EventDispatcher.extend({__construct:function(t){this.handlers=[],this.location=window.location,this.history=window.history,this.bindAll("__checkUrl")},start:function(t){return t=t||{},window.addEventListener("hashchange",this.__checkUrl),this.useHashBang=!!t.useHashBang,this.fragment=this.__getFragment(),!1!==t.trigger&&this.__loadUrl(),this},stop:function(){return window.removeEventListener("hashchange",this.__checkUrl),this},addRoute:function(t,n){return this.handlers.unshift({route:t,callback:n}),this},getPath:function(){var t=this.location.href.match(/#!?(.*)$/);return t?t[1]:""},setPath:function(t,n){if(n=n||{},t=this.__getFragment(t),this.fragment!==t){var e=this.location,o=this.useHashBang?"#!/":"#/";if(this.fragment=t,n.replace){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+o+t)}else e.hash=o+t;return n.trigger&&this.__loadUrl(t),this}},__checkUrl:function(t){var n=this.__getFragment()!==this.fragment;return n&&(this.__loadUrl(),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CHANGE))),!n},__getFragment:function(t){return(t||this.getPath()).replace(/^#!|^[#\/]|\s+$/g,"")},__loadUrl:function(t){var n=this.fragment=this.__getFragment(t),e=conbo.some(this.handlers,function(t){if(t.route.test(n))return t.callback(n),!0});return e||this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.FAULT)),e}}),conbo.Router=conbo.EventDispatcher.extend({__construct:function(t){t.routes&&(this.routes=t.routes),this.historyClass=conbo.History,this.context=t.context},start:function(t){return this.__history||(this.__history=new this.historyClass,this.__bindRoutes(),this.__history.addEventListener(conbo.ConboEvent.FAULT,this.dispatchEvent,{scope:this}).addEventListener(conbo.ConboEvent.CHANGE,this.dispatchEvent,{scope:this}).start(t),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.START))),this},stop:function(){return this.__history&&(this.__history.removeEventListener().stop(),delete this.__history,this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.STOP))),this},addRoute:function(i,r,c){var s=conbo.isRegExp(i)?i:this.__routeToRegExp(i);return c=c||this[r],conbo.isFunction(r)&&(c=r,r=""),c=c||this[r],this.__history.addRoute(s,function(t){var n=this.__extractParameters(s,t),e=conbo.isString(i)?conbo.object((i.match(/:\w+/g)||[]).map(function(t){return t.substr(1)}),n):{};c&&c.apply(this,n);var o={router:this,route:s,name:r,parameters:n,params:e,path:t};this.dispatchEvent(new conbo.ConboEvent("route:"+r,o)),this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.ROUTE,o))}.bind(this)),this},setPath:function(t,n){return n=conbo.setDefaults({},n,{trigger:!0}),this.__history.setPath(t,n),this},get path(){return this.__history?this.__history.getPath():""},set path(t){return this.setPath(t)},toString:function(){return"conbo.Router"},__bindRoutes:function(){if(this.routes)for(var t,n=conbo.keys(this.routes);null!=(t=n.pop());)this.addRoute(t,this.routes[t])},__routeToRegExp:function(t){return t=t.replace(/^\/+|\/+$/g,"").replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(t,n){return n?t:"([^/]+)"}).replace(/\*\w+/g,"(.*?)"),new RegExp("^"+t+"$")},__extractParameters:function(t,n){var e=t.exec(n).slice(1);return conbo.map(e,function(n){if(n)try{return decodeURIComponent(n)}catch(t){return unescape(n)}return null})}}).implement(conbo.IInjectable),__denumerate(conbo.Router.prototype),conbo.ready(function(){conbo.isNode||conbo.info("%c "+conbo.toString()+" ","font-weight:bold; background-color:#069; color:white;","https://conbo.mesmotronic.com")}),conbo});