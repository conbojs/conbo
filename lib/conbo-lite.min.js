!function(a,b,c,d){"function"==typeof define&&define.amd?define("conbo",function(){return c(a,b)}):"undefined"!=typeof module&&module.exports?module.exports=c(a,b):a.conbo=c(a,b)}(this,this.document,function(window,document,undefined){"use strict";var __namespaces={},conbo=function(a){if(!a||!conbo.isString(a))return void conbo.warn("First parameter must be the namespace string, received",a);__namespaces[a]||(__namespaces[a]=new conbo.Namespace);var b=__namespaces[a],c=conbo.rest(arguments),d=c.pop();if(conbo.isFunction(d)){var e=d.apply(b,c);conbo.isObject(e)&&!conbo.isArray(e)&&b.add(e)}return b};conbo.conbo=conbo,conbo.VERSION="4.0.3",conbo.toString=function(){return"ConboJS v"+this.VERSION};var __dispatchChange=function(a,b){if(a instanceof conbo.EventDispatcher){var c={property:b,value:a[b]};return a.dispatchEvent(new conbo.ConboEvent("change:"+b,c)),a.dispatchEvent(new conbo.ConboEvent("change",c)),this}},__defineProperty=function(a,b,c,d,e,f){if(conbo.isAccessor(a,b))return this;conbo.isUndefined(c)&&(c=a[b]);var g=!d&&!e;return arguments.length<6&&(f=0!==b.indexOf("_")),g?(d=function(){return c},e=function(a){conbo.isEqual(a,c)||(c=a,__dispatchChange(this,b))},e.bindable=!0):e&&(e=conbo.wrap(e,function(a,c){a.call(this,c),__dispatchChange(this,b)}),e.bindable=!0),Object.defineProperty(a,b,{enumerable:f,configurable:!0,get:d,set:e}),this},__definePrivateProperty=function(a,b,c){return 2==arguments.length&&(c=a[b]),Object.defineProperty(a,b,{enumerable:!1,configurable:!0,writable:!0,value:c}),this},__definePrivateProperties=function(a,b){for(var c in b)__definePrivateProperty(a,c,b[c]);return this},__denumerate=function(a){var b=arguments[1],c=b instanceof RegExp?conbo.filter(conbo.keys(a),function(a){return b.test(a)}):arguments.length>1?conbo.rest(arguments):conbo.keys(a);return c.forEach(function(b){var c=Object.getOwnPropertyDescriptor(a,b)||{value:a[b],configurable:!0,writable:!0};c.enumerable=!1,Object.defineProperty(a,b,c)}),this},__deprecated=function(a){conbo.warn("Deprecation warning: "+a)},__ep=function(a){return new conbo.ElementProxy(a)};return function(){var breaker=!1,ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIsArray=Array.isArray,nativeKeys=Object.keys;conbo.forEach=function(a,b,c){if(a!=undefined){var d,e;if(conbo.isIterable(a)){for(d=0,e=a.length;e>d;++d)if(b.call(c,a[d],d,a)===breaker)return}else{var f=conbo.keys(a);for(d=0,e=f.length;e>d;d++)if(b.call(c,a[f[d]],f[d],a)===breaker)return}return a}};var forEach=conbo.forEach;conbo.map=function(a,b,c){var d=[];return a==undefined?d:nativeMap&&a.map===nativeMap?a.map(b,c):(forEach(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)},conbo.indexOf=function(a,b){return nativeIndexOf.call(a,b)},conbo.lastIndexOf=function(a,b){return nativeLastIndexOf.call(a,b)},conbo.find=function(a,b,c){var d;return conbo.some(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},conbo.findIndex=function(a,b,c){var d=conbo.find(a,b,c);return a.indexOf(d)},conbo.filter=function(a,b,c){var d=[];return a==undefined?d:nativeFilter&&a.filter===nativeFilter?a.filter(b,c):(forEach(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},conbo.reject=function(a,b,c){return conbo.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},conbo.every=function(a,b,c){b||(b=conbo.identity);var d=!0;return a==undefined?d:nativeEvery&&a.every===nativeEvery?a.every(b,c):(forEach(a,function(a,e,f){return(d=d&&b.call(c,a,e,f))?void 0:breaker}),!!d)},conbo.some=function(a,b,c){b||(b=conbo.identity);var d=!1;return a==undefined?d:nativeSome&&a.some===nativeSome?a.some(b,c):(forEach(a,function(a,e,f){return d||(d=b.call(c,a,e,f))?breaker:void 0}),!!d)};var some=conbo.some;conbo.contains=function(a,b){return a==undefined?!1:-1!=a.indexOf(b)},conbo.invoke=function(a,b){var c=slice.call(arguments,2),d=conbo.isFunction(b);return conbo.map(a,function(a){return(d?b:a[b]).apply(a,c)})},conbo.pluck=function(a,b){return conbo.map(a,conbo.property(b))},conbo.max=function(a,b,c){if(!b&&conbo.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-(1/0),e=-(1/0);return forEach(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},conbo.min=function(a,b,c){if(!b&&conbo.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return forEach(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},conbo.shuffle=function(a){var b,c=0,d=[];return forEach(a,function(a){b=conbo.random(c++),d[c-1]=d[b],d[b]=a}),d};var lookupIterator=function(a){return a==undefined?conbo.identity:conbo.isFunction(a)?a:conbo.property(a)};conbo.toArray=function(a){return a?conbo.isArray(a)?slice.call(a):conbo.isIterable(a)?conbo.map(a,conbo.identity):conbo.values(a):[]},conbo.size=function(a){return a?conbo.isIterable(a)?a.length:conbo.keys(a).length:0},conbo.last=function(a,b,c){return a==undefined?undefined:b==undefined||c?a[a.length-1]:slice.call(a,Math.max(a.length-b,0))},conbo.rest=function(a,b,c){return slice.call(a,b==undefined||c?1:b)},conbo.compact=function(a){return conbo.filter(a,conbo.identity)};var flatten=function(a,b,c){return b&&conbo.every(a,conbo.isArray)?concat.apply(c,a):(forEach(a,function(a){conbo.isArray(a)||conbo.isArguments(a)?b?push.apply(c,a):flatten(a,b,c):c.push(a)}),c)};conbo.flatten=function(a,b){return flatten(a,b,[])},conbo.without=function(a){return conbo.difference(a,slice.call(arguments,1))},conbo.partition=function(a,b){var c=[],d=[];return forEach(a,function(a){(b(a)?c:d).push(a)}),[c,d]},conbo.uniq=function(a,b,c,d){conbo.isFunction(b)&&(d=c,c=b,b=!1);var e=c?conbo.map(a,c,d):a,f=[],g=[];return forEach(e,function(c,d){(b?d&&g[g.length-1]===c:conbo.contains(g,c))||(g.push(c),f.push(a[d]))}),f},conbo.union=function(){return conbo.uniq(conbo.flatten(arguments,!0))},conbo.intersection=function(a){var b=slice.call(arguments,1);return conbo.filter(conbo.uniq(a),function(a){return conbo.every(b,function(b){return conbo.contains(b,a)})})},conbo.difference=function(a){var b=concat.apply(ArrayProto,slice.call(arguments,1));return conbo.filter(a,function(a){return!conbo.contains(b,a)})},conbo.object=function(a,b){if(a==undefined)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},conbo.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var ctor=function(){};conbo.bind=function(a,b){return a.bind.apply(a,conbo.rest(arguments))},conbo.bindAll=function(a){var b;return b=arguments.length>1?conbo.rest(arguments):conbo.filter(conbo.getFunctionNames(a),function(b){return!(conbo.isAccessor(a,b)||conbo.isNative(a[b]))}),b.forEach(function(b){a[b]=a[b].bind(a)}),a},conbo.partial=function(a){var b=slice.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===conbo&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}};var ready__domContentLoaded=!document||-1!=["complete","loaded"].indexOf(document.readyState);conbo.ready=function(a,b){var c=conbo.toArray(arguments),d=function(){document&&document.removeEventListener("DOMContentLoaded",d),ready__domContentLoaded=!0,conbo.defer.apply(conbo,c)};ready__domContentLoaded?d():document.addEventListener("DOMContentLoaded",d)},conbo.defer=function(a,b){return b&&(a=a.bind(b)),setTimeout.apply(undefined,[a,0].concat(conbo.rest(arguments,2)))};var callLater__tasks=[],callLater__run=function(){for(var a;a=callLater__tasks.shift();)a()};conbo.callLater=function(a,b){0===callLater__run.length&&window.requestAnimationFrame(callLater__run);var c=function(){a.apply(b,conbo.rest(arguments,2))};callLater__tasks.push(c)},conbo.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=undefined,b)}},conbo.wrap=function(a,b){return conbo.partial(b,a)},conbo.keys=function(a,b){return nativeKeys(a)},conbo.functionKeys=function(a,b,c){return conbo.filter(conbo.keys(a,b).sort(),function(b){return c?conbo.isFunction(a[b]):conbo.isFunc(a,b)})},conbo.variableKeys=function(a,b){return conbo.difference(conbo.keys(a,b),conbo.functionKeys(a,b))},conbo.getPropertyNames=function(a){var b=[];if(!a)return b;do{var c=Object.getOwnPropertyNames(a);c.forEach(function(a){-1===b.indexOf(a)&&b.push(a)})}while(a=Object.getPrototypeOf(a));return b},conbo.getPublicPropertyNames=function(a){return conbo.filter(conbo.getPropertyNames(a),function(a){return!/^_.+/.test(a)})},conbo.getPrivatePropertyNames=function(a){return conbo.filter(conbo.getPropertyNames(a),function(a){return/^_[a-z\d]+/i.test(a)})},conbo.getInternalPropertyNames=function(a){return conbo.filter(conbo.getPropertyNames(a),function(a){return/^__.+/.test(a)})},conbo.getFunctionNames=function(a,b){return conbo.filter(conbo.getPropertyNames(a).sort(),function(c){return b?conbo.isFunction(a[c]):conbo.isFunc(a,c)})},conbo.getVariableNames=function(a){return conbo.difference(conbo.getPropertyNames(a),conbo.getFunctionNames(a))},conbo.getOwnFunctionNames=function(a,b){return conbo.filter(Object.getOwnPropertyNames(a).sort(),function(c){return b?conbo.isFunction(a[c]):conbo.isFunc(a,c)})},conbo.getOwnVariableNames=function(a){return conbo.difference(Object.getOwnPropertyNames(a),conbo.getOwnFunctionNames(a))},conbo.getPropertyDescriptor=function(a,b){if(a)do{var c=Object.getOwnPropertyDescriptor(a,b);if(c)return c}while(a=Object.getPrototypeOf(a))},conbo.values=function(a,b){for(var c=b?conbo.keys(a):conbo.getPropertyNames(a),d=c.length,e=new Array(d),f=0;d>f;f++)e[f]=a[c[f]];return e},conbo.functions=function(a){return __deprecated("conbo.functions is deprecated, use conbo.getFunctionNames"),conbo.getFunctionNames()},conbo.defineValues=function(a){return forEach(slice.call(arguments,1),function(b){if(b)for(var c in b)conbo.cloneProperty(b,c,a)}),a},conbo.defineBindableValues=function(a){return forEach(slice.call(arguments,1),function(b){if(b)for(var c in b)delete a[c],__defineProperty(a,c,b[c])}),a},conbo.pick=function(a){var b={},c=concat.apply(ArrayProto,slice.call(arguments,1));return forEach(c,function(c){c in a&&conbo.cloneProperty(a,c,b)}),b},conbo.omit=function(a){var b={},c=concat.apply(ArrayProto,slice.call(arguments,1));for(var d in a)conbo.contains(c,d)||conbo.cloneProperty(a,d,b);return b},conbo.defineDefaults=function(a){return forEach(slice.call(arguments,1),function(b){if(b)for(var c in b)a[c]===undefined&&conbo.cloneProperty(b,c,a)}),a},conbo.setDefaults=function(a){return forEach(slice.call(arguments,1),function(b){if(b)for(var c in b)a[c]===undefined&&(a[c]=b[c])}),a},conbo.clone=function(a){return conbo.isObject(a)?conbo.isArray(a)?a.slice():conbo.defineValues({},a):a};var eq=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;var e=toString.call(a);if(e!=toString.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0===a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(conbo.isFunction(g)&&g instanceof g&&conbo.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,j=!0;if("[object Array]"==e){if(i=a.length,j=i==b.length)for(;i--&&(j=eq(a[i],b[i],c,d)););}else{for(var k in a)if(conbo.has(a,k)&&(i++,!(j=conbo.has(b,k)&&eq(a[k],b[k],c,d))))break;if(j){for(k in b)if(conbo.has(b,k)&&!i--)break;j=!i}}return c.pop(),d.pop(),j};conbo.isEqual=function(a,b){return eq(a,b,[],[])},conbo.isEmpty=function(a){return!a||conbo.isArray(a)&&0===a.length||!isNaN(a)&&!parseFloat(a)||conbo.isObject(a)&&!conbo.keys(a).length||conbo.isObject(a)&&"length"in a&&0===a.length},conbo.isIterable=function(a){return a&&a.length===+a.length},conbo.isElement=function(a){return!(!a||1!==a.nodeType)},conbo.isArray=nativeIsArray||function(a){return"[object Array]"==toString.call(a)},conbo.isObject=function(a){return a===Object(a)},forEach(["Arguments","Function","String","Number","Date","RegExp"],function(a){conbo["is"+a]=function(b){return toString.call(b)=="[object "+a+"]"}}),conbo.isArguments(arguments)||(conbo.isArguments=function(a){return!(!a||!conbo.has(a,"callee"))}),"function"!=typeof/./&&(conbo.isFunction=function(a){return"function"==typeof a}),conbo.isFunc=function(a,b){var c=conbo.getPropertyDescriptor(a,b);return c&&"function"==typeof c.value},conbo.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},conbo.isNaN=function(a){return conbo.isNumber(a)&&a!=+a},conbo.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==toString.call(a)},conbo.isNull=function(a){return null===a},conbo.isUndefined=function(a){return a===undefined},conbo.has=function(a,b){return hasOwnProperty.call(a,b)},conbo.identity=function(a){return a},conbo.property=function(a){return function(b){return b[a]}},conbo.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},conbo.random=function(a,b){return b==undefined&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var idCounter=0;conbo.uniqueId=function(a){var b=++idCounter+"";return a?a+b:b},conbo.isSupported=window.addEventListener&&!!Object.defineProperty&&!!Object.getOwnPropertyDescriptor,conbo.noop=function(){},conbo.notImplemented=function(){conbo.warn("Method not implemented")},conbo.toCamelCase=function(a,b){var c=(a||"").toLowerCase().replace(/([\W_])([a-z])/g,function(a){return a[1].toUpperCase()}).replace(/(\W+)/,"");return b?c.charAt(0).toUpperCase()+c.slice(1):c},conbo.toUnderscoreCase=function(a,b){return b||(b="_"),(a||"").replace(/\W+/g,b).replace(/([a-z\d])([A-Z])/g,"$1"+b+"$2").toLowerCase()},conbo.toKebabCase=function(a){return conbo.toUnderscoreCase(a,"-")},conbo.padLeft=function(a,b,c){for(c||0===c||(c=" "),a||0===a||(a=""),b||(b=2),c=c.toString().charAt(0),string=a.toString();string.length<b;)string=c+string;return string},conbo.addLeadingZero=function(a,b){return conbo.padLeft(a,b,0)},conbo.formatNumber=function(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+a)?+a:0,f=isFinite(+b)?Math.abs(b):0,g=conbo.isUndefined(d)?",":d,h=conbo.isUndefined(c)?".":c,i=e.toFixed(f).split(".");return i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=new Array(f-i[1].length+1).join("0")),i.join(h)},conbo.formatCurrency=function(a,b,c,d,e,f){conbo.isUndefined(d)&&(d=2),b||(b="");var g=conbo.formatNumber(a,d,e,f);return c?g+b:b+g},conbo.encodeEntities=function(a){return conbo.isString(a)||(a=conbo.isNumber(a)?a.toString():""),a.replace(/[\u00A0-\u9999<>\&]/gim,function(a){return"&#"+a.charCodeAt(0)+";"})},conbo.decodeEntities=function(a){return conbo.isString(a)||(a=""),a.replace(/&#(\d+);/g,function(a,b){return String.fromCharCode(b)})},conbo.setValues=function(a){return conbo.rest(arguments).forEach(function(b){if(b)for(var c in b)a[c]=b[c]}),a},conbo.isClass=function(a,b){return!!a&&"function"==typeof a&&a.prototype instanceof(b||conbo.Class)},conbo.cloneProperty=function(a,b,c,d){d||(d=b);var e=Object.getOwnPropertyDescriptor(a,b);return e?Object.defineProperty(c,d,e):c[d]=a[b],this},conbo.sortOn=function(a,b,c){return c||(c={}),conbo.isArray(a)&&b&&a.sort(function(a,d){var e=[a[b],d[b]];return c.descending&&e.reverse(),c.caseInsensitive&&conbo.forEach(e,function(a,b){conbo.isString(a)&&(e[b]=a.toLowerCase())}),e[0]<e[1]?-1:e[0]>e[1]?1:0}),a},conbo.instanceOf=function(a,b){if(!a||conbo.isClass(a))return!1;for(var c=conbo.rest(arguments),d=0,e=c.length;e>d;d++){if(b=c[d],!b)return!1;try{if(a instanceof b)return!0}catch(f){}if(!conbo.isObject(b))return!1;for(var g in b)if(!(g in a)||conbo.isFunction(a[g])!=conbo.isFunction(b[g]))return!1}return!0},conbo.loadCss=function(a,b){if(!("document"in window)||document.querySelector('[href="'+a+'"]'))return this;var c,d;return d=new conbo.Promise,c=document.createElement("link"),c.rel="stylesheet",c.type="text/css",c.media=b||"all",c.addEventListener("load",function(a){d.dispatchResult()}),c.addEventListener("error",function(a){d.dispatchFault()}),c.href=a,document.querySelector("head").appendChild(c),d},conbo.loadScript=function(a){return conbo.httpRequest({url:a,dataType:"script"})},conbo.properties=function(a,b){return __deprecated("conbo.properties is deprecated, use conbo.variableKeys"),conbo.variableKeys(a,b)},conbo.makeBindable=function(a,b){return b||(b=conbo.getVariableNames(a)),b.forEach(function(b){__defineProperty(a,b)}),this},conbo.makeAllBindable=function(a,b){return b=conbo.uniq((b||[]).concat(conbo.getVariableNames(a))),conbo.makeBindable(a,b),this},conbo.isAccessor=function(a,b){return a?!!a.__lookupGetter__(b)||!!a.__lookupSetter__(b):!1},conbo.isBindable=function(a,b){return conbo.isAccessor(a,b)?!!(a.__lookupSetter__(b)||{}).bindable:!1},conbo.isNative=function(a){try{return!("prototype"in a)}catch(b){}return!1},conbo.parseTemplate=function(template,data){return template?(data||(data={}),template.replace(/(({{(.+?)}})|(\${(.+?)}))/g,function(propNameInBrackets,propName){var args=propName.split("|"),value,parseFunction;args[0]=conbo.BindingUtils.cleanPropertyName(args[0]);try{value=eval("data."+args[0])}catch(e){}try{parseFunction=eval("data."+args[1])}catch(e){}return conbo.isFunction(parseFunction)||(parseFunction=conbo.BindingUtils.defaultParseFunction),parseFunction(value)})):""},conbo.compileTemplate=function(a,b){return function(c){return conbo.parseTemplate(a,conbo.setDefaults(c||{},b))}},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}()),conbo.toQueryString=function(a){return conbo.keys(a).map(function(b){return b+"="+encodeURIComponent(a[b])}).join("&")},conbo.getValue=function(a,b,c){if(c!==!1)return a[b];for(var d in a)if(d.toLowerCase()==b.toLowerCase())return a[d]},conbo.logEnabled=!0;var logMethods=["log","warn","info","error"];logMethods.forEach(function(a){conbo[a]=function(){console&&conbo.logEnabled&&console[a].apply(console,arguments)}})}(),conbo.Class=function(){this.declarations.apply(this,arguments),this.preinitialize.apply(this,arguments),this.initialize.apply(this,arguments)},conbo.Class.prototype={declarations:function(){},preinitialize:function(){},initialize:function(){},get supro(){return Object.getPrototypeOf(Object.getPrototypeOf(this))},bind:function(a){return conbo.bind.apply(conbo,[a,this].concat(conbo.rest(arguments)))},bindAll:function(){return conbo.bindAll.apply(conbo,[this].concat(conbo.toArray(arguments))),this},toString:function(){return"conbo.Class"}},__denumerate(conbo.Class.prototype),conbo.Class.extend=function(a,b){var c,d=this;c=a&&conbo.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},conbo.defineValues(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&conbo.defineValues(c.prototype,a),c},conbo.Class.implement=function(){var a=conbo.defineDefaults.apply(conbo,conbo.union([{}],arguments)),b=conbo.keys(a),c=this.prototype;conbo.defineDefaults(this.prototype,a);var d=conbo.reject(b,function(a){return c[a]!==conbo.notImplemented});if(d.length)throw new Error(c.toString()+" does not implement the following method(s): "+d.join(", "));return this},conbo.ConboClass=conbo.Class.extend({constructor:function(a){var b=conbo.toArray(arguments);b[0]===undefined&&(b[0]={}),this.declarations.apply(this,b),this.preinitialize.apply(this,b),this.__construct.apply(this,b),this.initialize.apply(this,b),conbo.makeAllBindable(this,this.bindable),this.__postInitialize.apply(this,b)},toString:function(){return"conbo.ConboClass"},__construct:function(){},__postInitialize:function(){}}),__denumerate(conbo.ConboClass.prototype),conbo.Namespace=conbo.ConboClass.extend({__construct:function(){var a=function(){document&&this.autoInit!==!1&&this.initDom()};conbo.ready(a,this)},initDom:function(a){return conbo.initDom(this,a),this},observeDom:function(a){return conbo.observeDom(this,a),this},unobserveDom:function(a){return conbo.unobserveDom(this,a),this},add:function(a){return conbo.setDefaults.apply(conbo,[this].concat(conbo.toArray(arguments))),this}}),conbo.ServerApplication=conbo.EventDispatcher.extend({contextClass:conbo.Context,__construct:function(a){a=conbo.clone(a||{}),a.app=this,this.context=new this.contextClass(a)},toString:function(){return"conbo.ServerApplication"}}).implement(conbo.IInjectable),__denumerate(conbo.ServerApplication.prototype),conbo.Event=conbo.Class.extend({constructor:function(a){if(this.preinitialize.apply(this,arguments),conbo.isString(a)?this.type=a:conbo.defineDefaults(this,a),!this.type)throw new Error("Invalid or undefined event type");this.initialize.apply(this,arguments)},initialize:function(a,b){this.data=b},clone:function(){return conbo.clone(this)},preventDefault:function(){return this.defaultPrevented=!0,this},stopPropagation:function(){return this.cancelBubble=!0,this},stopImmediatePropagation:function(){return this.immediatePropagationStopped=!0,this.stopPropagation(),this},toString:function(){return"conbo.Event"}},{ALL:"*"}),__denumerate(conbo.Event.prototype),conbo.ConboEvent=conbo.Event.extend({initialize:function(a,b){conbo.defineDefaults(this,b)},toString:function(){return"conbo.ConboEvent"}},{ALL:"*",CHANGE:"change",ADD:"add",REMOVE:"remove",ROUTE:"route",START:"start",STOP:"stop",TEMPLATE_COMPLETE:"templateComplete",TEMPLATE_FAULT:"templateFault",BIND:"bind",UNBIND:"unbind",CREATION_COMPLETE:"creationComplete",DETACH:"detach",RESULT:"result",FAULT:"fault"}),function(){var a=function(a,b,c,d,e){"*"==a&&(a="all"),this.__queue||__definePrivateProperty(this,"__queue",{}),this.hasEventListener(a,b,c)||(a in this.__queue||(this.__queue[a]=[]),this.__queue[a].push({handler:b,scope:c,once:e,priority:d||0}),this.__queue[a].sort(function(a,b){return b.priority-a.priority}))},b=function(a,b,c){if("*"==a&&(a="all"),this.__queue){var d,e,f=this,g=function(a,d){for(e=0;e<a.length;e++)a[e].handler&&a[e].handler!=b||a[e].scope&&a[e].scope!=c||a.splice(e--,1);a.length||delete f.__queue[d]};a in this.__queue?(d=this.__queue[a],g(d,a)):a==undefined&&conbo.forEach(this.__queue,function(a,b){g(a,b)})}};conbo.EventDispatcher=conbo.ConboClass.extend({__construct:function(a){a.context&&(this.context=a.context)},addEventListener:function(b,c,d,e,f){if(!b)throw new Error("Event type undefined");if(!c||!conbo.isFunction(c))throw new Error("Event handler is undefined or not a function");return conbo.isString(b)&&(b=b.split(" ")),conbo.isArray(b)&&conbo.forEach(b,function(b,g,h){a.call(this,b,c,d,e,!!f)},this),this},removeEventListener:function(a,c,d){return arguments.length?(conbo.isString(a)&&(a=a.split(" ")),conbo.isArray(a)||(a=[undefined]),conbo.forEach(a,function(a,e,f){b.call(this,a,c,d)},this),this):(__definePrivateProperty(this,"__queue",{}),this)},hasEventListener:function(a,b,c){if(!(this.__queue&&a in this.__queue&&this.__queue[a].length))return!1;for(var d=this.__queue[a],e=d.length,f=0;e>f;f++)if(!(b&&d[f].handler!=b||c&&d[f].scope!=c))return!0;return!1},dispatchEvent:function(a){if(!a)throw new Error("Event undefined");var c=conbo.isString(a);if(c&&conbo.warn('Use of dispatchEvent("'+a+'") is deprecated, please use dispatchEvent(new conbo.Event("'+a+'"))'),!c&&a instanceof conbo.Event||(a=new conbo.Event(a)),!this.__queue||!(a.type in this.__queue)&&!this.__queue.all)return this;a.target||(a.target=this),a.currentTarget=this;var d=conbo.union(this.__queue[a.type]||[],this.__queue.all||[]);if(!d||!d.length)return this;for(var e=0,f=d.length;f>e;++e){var g=d[e],h=g.handler.call(g.scope||this,a);if(g.once&&b.call(this,a.type,g.handler,g.scope),h===!1||a.immediatePropagationStopped)break}return this},dispatchChange:function(a){return conbo.forEach(arguments,function(a){__dispatchChange(this,a)},this),this},toString:function(){return"conbo.EventDispatcher"}}).implement(conbo.IInjectable),__denumerate(conbo.EventDispatcher.prototype)}(),conbo.Hash=conbo.EventDispatcher.extend({__construct:function(a){a.context&&(this.context=a.context),conbo.setDefaults(this,a.source,this.defaults),delete this.defaults},toJSON:function(){var a=function(a){return 0!==String(a).indexOf("_")},b={},c=conbo.filter(conbo.variableKeys(this),a);return c.forEach(function(a){b[a]=this[a]},this),b},toString:function(){return"conbo.Hash"}}),__denumerate(conbo.Hash.prototype),conbo.LocalHash=conbo.Hash.extend({__construct:function(a){var b="ConboLocalHash";a=conbo.defineDefaults(a,{name:b});var c=a.name,d=a.session?window.sessionStorage:window.localStorage;c==b&&conbo.warn("No name specified for "+this.toString+', using "'+b+'"');var e=function(){return c in d?JSON.parse(d.getItem(c)||"{}"):a.source||{}};this.addEventListener(conbo.ConboEvent.CHANGE,function(a){d.setItem(c,JSON.stringify(this.toJSON()))},this,1e3),a.source=e(),conbo.Hash.prototype.__construct.call(this,a)},flush:function(){this.dispatchEvent(new conbo.ConboEvent(conbo.ConboEvent.CHANGE))},toString:function(){return"conbo.LocalHash"}}),__denumerate(conbo.LocalHash.prototype),conbo.Promise=conbo.EventDispatcher.extend({initialize:function(a){this.bindAll("dispatchResult","dispatchFault")},dispatchResult:function(a){return this.dispatchEvent(new conbo.ConboEvent("result",{result:a})),this},dispatchFault:function(a){return this.dispatchEvent(new conbo.ConboEvent("fault",{fault:a})),this},then:function(a,b,c){return a&&this.addEventListener("result",a,c),b&&this.addEventListener("fault",b,c),this},toString:function(){return"conbo.Promise"}}),conbo.Glimpse=conbo.EventDispatcher.extend({__construct:function(a){this.__setEl(a.el||document.createElement(this.tagName)),a.context&&(this.context=a.context),this.template&&(this.el.innerHTML=this.template)},get tagName(){return this.__tagName||"div"},set tagName(a){__definePrivateProperty(this,"__tagName",a)},get el(){return this.__el},toString:function(){return"conbo.Glimpse"},__setEl:function(a){var b=conbo.setValues({},this.attributes);this.id&&!a.id&&(b.id=this.id),a.className+=" cb-glimpse "+(this.className||""),a.cbGlimpse=this;for(var c in b)a.setAttribute(conbo.toKebabCase(c),b[c]);return this.style&&(a.style=conbo.setValues(a.style,this.style)),__definePrivateProperty(this,"__el",a),this}}),__denumerate(conbo.Glimpse.prototype),conbo.ready(function(){conbo.info(conbo.toString())}),conbo});